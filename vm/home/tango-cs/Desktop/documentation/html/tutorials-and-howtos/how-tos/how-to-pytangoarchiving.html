

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PyTangoArchiving Recipes &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="HOW-TOs" href="index.html"/>
        <link rel="next" title="How to run a device server with an active Windows firewall" href="how-to-run-device-server-firewall.html"/>
        <link rel="prev" title="How to PyTango" href="how-to-pytango.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools-and-extensions/index.html">Tools and Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/index.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and How-Tos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">HOW-TOs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="how-to-compile-mniorb.html">How to cross compile omniORB</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-create-inheritance-link.html">How to create inheritance link between Tango classes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-deal-string-tango-attribute-cpp.html">How to deal with string Tango attribute (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-device-server-startup-time.html">How to reconnect Database at device server startup time</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-distinguish-clients-on-the-server-side.html">How to distinguish clients on the server side</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-dynamic-attributes-device-class.html">How to add dynamic attributes to a device class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-extract-scalar-attribute.html">How to extract read and set values from a scalar attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-fandango.html">How to Fandango</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-first-device-class.html">How to write your first Device Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-import-classes-to-catalogue.html">How to import multiple device classes to the Catalogue</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-java-server-with-astor.html">Integrate Java Tango servers with Astor</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-with-systemd.html">Tango with systemd integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-pytango.html">How to PyTango</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PyTangoArchiving Recipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-server-firewall.html">How to run a device server with an active Windows firewall</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-servers-on-XP-with-IPv6.html">How to run device servers on Windows XP with IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-start-device-server.html">How to start a device server</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-try-tango.html">How to try Tango Controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-use-tango-servers-without-db.html">Using Tango servers without DB for unit testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tune-polling-code-tango-class.html">How to tune polling by code in a TANGO class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-use-vectors-set-attributes.html">How to use vectors to set attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and How-Tos</a> &raquo;</li>
        
          <li><a href="index.html">HOW-TOs</a> &raquo;</li>
        
      <li>PyTangoArchiving Recipes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials-and-howtos/how-tos/how-to-pytangoarchiving.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pytangoarchiving-recipes">
<h1>PyTangoArchiving Recipes<a class="headerlink" href="#pytangoarchiving-recipes" title="Permalink to this headline">¶</a></h1>
<p><em>by Sergi Rubio</em></p>
<p><strong>PyTangoArchiving</strong> is the python API for Tango <a class="reference external" href="https://github.com/tango-controls/PyTangoArchiving">Archiving</a>.</p>
<p>This package allows to:</p>
<ul class="simple">
<li>Integrate Hdb and Snap archiving with other python/PyTango tools.</li>
<li>Start/Stop Archiving devices in the appropiated order.</li>
<li>Increase the capabilities of configuration and diagnostic.</li>
<li>Import/Export .csv and .xml files between the archiving and the database.</li>
</ul>
<p>Don’t edit this wiki directly, the source for this documentation is
available at PyTangoArchiving <a class="reference external" href="https://github.com/sergirubio/PyTangoArchiving/blob/documentation/doc/PyTangoArchiving_UserGuide.rst">UserGuide</a></p>
<div class="section" id="installing-pytangoarchiving">
<h2>Installing PyTangoArchiving:<a class="headerlink" href="#installing-pytangoarchiving" title="Permalink to this headline">¶</a></h2>
<p>Repository is available on <a class="reference external" href="https://sourceforge.net/p/tango-cs/code/HEAD/tree/archiving/tool/PyTangoArchiving">sourceforge</a>:</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> svn co https://svn.code.sf.net/p/tango-cs/code/archiving/tool/PyTangoArchiving/trunk
</pre></div>
</td></tr></table></div>
<div class="section" id="dependencies">
<h3>Dependencies:<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Tango Java Archiving, <a class="reference external" href="https://sourceforge.net/projects/tango-cs/files/tools/ArchivingRoot-16.2.4.zip/download">ArchivingRoot</a> from sourceforge,</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/PyTango">PyTango</a></li>
<li><a class="reference external" href="https://pypi.python.org/pypi/MySQL-python">python-mysql</a></li>
<li><a class="reference external" href="https://pypi.python.org/pypi/Taurus">Taurus</a> (optional)</li>
<li>fandango:</li>
</ol>
<blockquote>
<div><div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> svn co https://svn.code.sf.net/p/tango-cs/code/share/fandango/trunk/fandango fandango
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>
<div class="section" id="setup">
<h3>Setup:<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Follow Tango Java Archiving installation document to setup Java Archivers and Extractors.</li>
<li>Some of the most common installation issues are solved in several topics in &nbsp;Tango forums (search for Tdb/Hdb/Snap Archivers):<ul>
<li><a class="reference external" href="http://www.tango-controls.org/community/forums/c/general/development/tango-archiving">tango-archiving</a>,</li>
<li><a class="reference external" href="http://www.tango-controls.org/community/forums/c/general/installation/installation-of-hdb-and-tdb-in-linux">installation-of-hdb-and-tdb-in-linux</a>.</li>
</ul>
</li>
<li>Install PyTango and MySQL-python using their own setup.py scripts.</li>
<li>fandango, and PyTangoArchiving parent folders&nbsp;must be added to your <em>PYTHONPATH</em> environment variable.</li>
<li>Although Java Extractors may be used, it is recommended to configure direct MySQL access for PyTangoArchiving</li>
</ul>
</div>
</div>
<div class="section" id="accessing-mysql">
<h2>Accessing MySQL:<a class="headerlink" href="#accessing-mysql" title="Permalink to this headline">¶</a></h2>
<p>Although not needed, I recommend you to create a new MySQL user for data querying:</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> mysql -u hdbmanager -p hdb

<span class="gp">$</span> GRANT USAGE ON hdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;localhost&#39;</span> IDENTIFIED BY <span class="s1">&#39;**********&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT USAGE ON hdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;**********&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT SELECT ON hdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT SELECT ON hdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;%&#39;</span><span class="p">;</span>

<span class="gp">$</span> mysql -u tdbmanager -p tdb

<span class="gp">$</span> GRANT USAGE ON tdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;localhost&#39;</span> IDENTIFIED BY <span class="s1">&#39;**********&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT USAGE ON tdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;**********&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT SELECT ON tdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="gp">$</span> GRANT SELECT ON tdb.* TO <span class="s1">&#39;user&#39;</span>@<span class="s1">&#39;%&#39;</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<p>Check in a python shell that your able to access the database:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>

<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">config</span><span class="o">=</span><span class="s1">&#39;user:password@hostname&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Then configure the Hdb/Tdb Extractor class properties to use this user/password for querying:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTango</span>

<span class="n">PyTango</span><span class="o">.</span><span class="n">Database</span><span class="p">()</span><span class="o">.</span><span class="n">put_class_property</span><span class="p">(</span><span class="s1">&#39;HdbExtractor&#39;</span><span class="p">,{</span><span class="s1">&#39;DbConfig&#39;</span><span class="p">:</span><span class="s1">&#39;user:password@hostname&#39;</span><span class="p">})</span>

<span class="n">PyTango</span><span class="o">.</span><span class="n">Database</span><span class="p">()</span><span class="o">.</span><span class="n">put_class_property</span><span class="p">(</span><span class="s1">&#39;TdbExtractor&#39;</span><span class="p">,{</span><span class="s1">&#39;DbConfig&#39;</span><span class="p">:</span><span class="s1">&#39;user:password@hostname&#39;</span><span class="p">})</span>
</pre></div>
</td></tr></table></div>
<p>You can test now access from a Reader (see recipes below) object or from
a taurustrend/ArchivingBrowser UI (Taurus required):</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="go">python PyTangoArchiving/widget/ArchivingBrowser.py</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>Download PyTangoArchiving from sourceforge:</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="go">svn co https://svn.code.sf.net/p/tango-cs/code/archiving/tool/PyTangoArchiving/trunk</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>api,<ul>
<li>getting servers/devices/instances implied in the archiving system and allowing</li>
</ul>
</li>
<li>historic,<ul>
<li>configuration and reading of historic data</li>
</ul>
</li>
<li>snap,<ul>
<li>configuration and reading of snapshot data,</li>
</ul>
</li>
<li>xml,<ul>
<li>conversion between xml and csv files</li>
</ul>
</li>
<li>scripts,<ul>
<li>configuration scripts</li>
</ul>
</li>
<li>reader,<ul>
<li>providing the useful Reader and ReaderProcess objects to retrieve archived data</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general-usage">
<h2>General usage<a class="headerlink" href="#general-usage" title="Permalink to this headline">¶</a></h2>
<p>In all these examples you can use hdb or tdb just replacing one by the
other</p>
<div class="section" id="get-archived-values-for-an-attribute">
<h3>Get archived values for an attribute<a class="headerlink" href="#get-archived-values-for-an-attribute" title="Permalink to this headline">¶</a></h3>
<p>The reader object provides a fast access to archived values</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>
<span class="gp">In [10]: </span><span class="n">rd</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="gp">In [11]: </span><span class="n">rd</span><span class="o">.</span><span class="n">get_attribute_values</span><span class="p">(</span><span class="s1">&#39;expchan/eh_emet02_ctrl/3/value&#39;</span><span class="p">,</span><span class="s1">&#39;2013-03-20 10:00&#39;</span><span class="p">,</span><span class="s1">&#39;2013-03-20 11:00&#39;</span><span class="p">)</span>
<span class="gh">Out[11]:</span>
<span class="go">[(1363770788.0, 5.79643e-14),</span>
<span class="go"> (1363770848.0, 5.72968e-14),</span>
<span class="go"> (1363770908.0, 5.7621e-14),</span>
<span class="go"> (1363770968.0, 6.46782e-14),</span>
<span class="go"> ...</span>
</pre></div>
</div>
</div>
<div class="section" id="start-stop-check-attributes">
<h3>Start/Stop/Check attributes<a class="headerlink" href="#start-stop-check-attributes" title="Permalink to this headline">¶</a></h3>
<p>You must create an Archiving api object and pass to it the list of
attributes with its archiving config:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>
<span class="n">hdb</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ArchivingAPI</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;[&#39;</span><span class="n">expchan</span><span class="o">/</span><span class="n">eh_emet03_ctrl</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">value</span><span class="s1">&#39;,&#39;</span><span class="n">expchan</span><span class="o">/</span><span class="n">eh_emet03_ctrl</span><span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="n">value</span><span class="s1">&#39;]</span>

<span class="c1">#Archive every 15 seconds if change&gt; +/-1.0, else every 300 seconds</span>
<span class="n">modes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;MODE_A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">15000.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="s1">&#39;MODE_P&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">300000.0</span><span class="p">]}</span>

<span class="c1">#If you omit the modes argument then archiving will be every 60s</span>
<span class="n">hdb</span><span class="o">.</span><span class="n">start_archiving</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span><span class="n">modes</span><span class="p">)</span>

<span class="n">hdb</span><span class="o">.</span><span class="n">load_last_values</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;expchan/eh_emet02_ctrl/3/value&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="mf">7.27081e-14</span><span class="p">]],</span>
    <span class="s1">&#39;expchan/eh_emet02_ctrl/4/value&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">39</span><span class="p">),</span>
    <span class="o">-</span><span class="mf">3.78655e-08</span><span class="p">]]</span>
<span class="p">}</span>

<span class="n">hdb</span><span class="o">.</span><span class="n">stop_archiving</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="loading-a-csv-file-into-archiving">
<h3>Loading a .CSV file into Archiving<a class="headerlink" href="#loading-a-csv-file-into-archiving" title="Permalink to this headline">¶</a></h3>
<p>The .csv file must have a shape like this one (any row starting with ‘#’ is ignored):</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="go">Host  Device  Attribute   Type    ArchivingMode   Periode &gt;15  MinRange    MaxRange</span>

<span class="gp">#</span>This header lines are mandatory!!!
<span class="go">@LABEL  Unique ID</span>
<span class="go">@AUTHOR Who?</span>
<span class="go">@DATE   When?</span>
<span class="go">@DESCRIPTION    What?</span>

<span class="gp">#</span>host   domain/family/member    attribute   HDB/TDB/STOP    periodic/absolute/relative

<span class="go">cdi0404 LI/DI/BPM-ACQ-01    @DEFAULT        periodic    300</span>
<span class="go">                            ADCChannelAPeak HDB absolute    15  1   1</span>
<span class="go">                                            TDB absolute    5   1   1</span>
<span class="go">                            ADCChannelBPeak HDB absolute    15  1   1</span>
<span class="go">                                            TDB absolute    5   1   1</span>
<span class="go">                            ADCChannelCPeak HDB absolute    15  1   1</span>
<span class="go">                                            TDB absolute    5   1   1</span>
<span class="go">                            ADCChannelDPeak HDB absolute    15  1   1</span>
<span class="go">                                            TDB absolute    5   1   1</span>
</pre></div>
</td></tr></table></div>
<p>The command to insert it is:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="s1">&#39;/...fbecheri_20130319.csv&#39;</span><span class="p">,</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>There are some arguments to modify Loading behavior.</p>
<p>launch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">explicitly</span> <span class="kc">True</span> <span class="n">then</span> <span class="n">archiving</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">triggered</span><span class="p">,</span> <span class="n">it</span> <span class="n">just</span> <span class="n">verifies</span> <span class="n">that</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span> <span class="ow">is</span> <span class="n">Ok</span> <span class="ow">and</span> <span class="n">attributes</span> <span class="n">are</span> <span class="n">available</span>
</pre></div>
</div>
<p>force:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="kc">False</span> <span class="n">the</span> <span class="n">loading</span> <span class="n">will</span> <span class="n">stop</span> <span class="n">at</span> <span class="n">first</span> <span class="n">error</span><span class="p">,</span> <span class="k">if</span> <span class="kc">True</span> <span class="n">then</span> <span class="n">it</span> <span class="n">tries</span> <span class="nb">all</span> <span class="n">attributes</span> <span class="n">even</span> <span class="k">if</span> <span class="n">some</span> <span class="n">failed</span>
</pre></div>
</div>
<p>overwrite:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="kc">False</span> <span class="n">attributes</span> <span class="n">already</span> <span class="n">archived</span> <span class="n">will</span> <span class="n">be</span> <span class="n">skipped</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-the-status-of-the-archiving">
<h3>Checking the status of the archiving<a class="headerlink" href="#checking-the-status-of-the-archiving" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">hdb</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ArchivingAPI</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="n">hdb</span><span class="o">.</span><span class="n">load_last_values</span><span class="p">()</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span> <span class="c1">#Put here whatever you want to filter the attribute names</span>
<span class="n">lates</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">hdb</span> <span class="k">if</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="n">a</span> <span class="ow">and</span> <span class="n">hdb</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">archiver</span> <span class="ow">and</span> <span class="n">hdb</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">modes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MODE_P&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hdb</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">last_date</span><span class="o">&lt;</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="p">(</span><span class="mi">3600</span><span class="o">+</span><span class="mf">1e-3</span><span class="o">*</span><span class="n">hdb</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">modes</span><span class="p">[</span><span class="s1">&#39;MODE_P&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))]</span>

<span class="c1">#Get the list of attributes that cannot be read from the control system (ask system responsibles)</span>
<span class="n">unav</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">lates</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fandango</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">check_attribute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="mi">6</span><span class="o">*</span><span class="mi">3600</span><span class="p">)]</span>
<span class="c1">#Get the list of attributes that are not being archived</span>
<span class="n">lates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lates</span> <span class="k">if</span> <span class="n">l</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">unav</span><span class="p">)</span>
<span class="c1">#Get the list of archivers not running properly</span>
<span class="n">bad_archs</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">hdb</span><span class="o">.</span><span class="n">check_archivers</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">]</span>

<span class="c1">#Restarting the archivers/attributes that failed</span>
<span class="n">bads</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lates</span> <span class="k">if</span> <span class="n">hdb</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bad_archs</span><span class="p">]</span>
<span class="n">astor</span> <span class="o">=</span> <span class="n">fandango</span><span class="o">.</span><span class="n">Astor</span><span class="p">()</span>
<span class="n">astor</span><span class="o">.</span><span class="n">load_from_devs_list</span><span class="p">(</span><span class="n">bad_archs</span><span class="p">)</span>
<span class="n">astor</span><span class="o">.</span><span class="n">restart_servers</span><span class="p">()</span>
<span class="n">hdb</span><span class="o">.</span><span class="n">restart_archiving</span><span class="p">(</span><span class="n">bads</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="restart-of-the-whole-archiving-system">
<h3>Restart of the whole archiving system<a class="headerlink" href="#restart-of-the-whole-archiving-system" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="go">admin@archiving:&gt; archiving_service.py stop-all</span>
<span class="go">...</span>
<span class="go">admin@archiving:&gt; archiving_service.py start-all</span>
<span class="go">...</span>
<span class="go">admin@archiving:&gt; archiving_service.py status</span>

<span class="gp">#</span>see archiving_service.py <span class="nb">help</span> <span class="k">for</span> other usages
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="using-the-python-api">
<h2>Using the Python API<a class="headerlink" href="#using-the-python-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="start-stop-of-an-small-10-list-of-attributes">
<h3>Start/Stop of an small (&lt;10) list of attributes<a class="headerlink" href="#start-stop-of-an-small-10-list-of-attributes" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#Stopping ...</span>
<span class="n">api</span><span class="o">.</span><span class="n">stop_archiving</span><span class="p">([</span><span class="s1">&#39;bo/va/dac/input&#39;</span><span class="p">,</span><span class="s1">&#39;bo/va/dac/settings&#39;</span><span class="p">])</span>

<span class="c1">#Starting with periodic=60s ; relative=15s if +/-1% change</span>
<span class="n">api</span><span class="o">.</span><span class="n">start_archiving</span><span class="p">([</span><span class="s1">&#39;bo/va/dac/input&#39;</span><span class="p">,</span><span class="s1">&#39;bo/va/dac/settings&#39;</span><span class="p">],{</span><span class="s1">&#39;MODE_P&#39;</span><span class="p">:[</span><span class="mi">60000</span><span class="p">],</span><span class="s1">&#39;MODE_R&#39;</span><span class="p">:[</span><span class="mi">15000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]})</span>

<span class="c1">#Restarting and keeping actual configuration</span>

<span class="n">attr_name</span> <span class="o">=</span> <span class="s1">&#39;bo/va/dac/input&#39;</span>
<span class="n">api</span><span class="o">.</span><span class="n">start_archiving</span><span class="p">([</span><span class="n">attr_name</span><span class="p">],</span><span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">attr_name</span><span class="p">]</span><span class="o">.</span><span class="n">extractModeString</span><span class="p">())</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="checking-if-a-list-of-attributes-is-archived">
<h3>Checking if a list of attributes is archived<a class="headerlink" href="#checking-if-a-list-of-attributes-is-archived" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">hdb</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="gp">In [17]: </span><span class="nb">sorted</span><span class="p">([(</span><span class="n">a</span><span class="p">,</span><span class="n">hdb</span><span class="o">.</span><span class="n">load_last_values</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">hdb</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;bl04&#39;</span><span class="p">)])</span>
<span class="gh">Out[17]:</span>
<span class="go">[(&#39;bl/va/elotech-01/output_1&#39;,</span>
<span class="go">  [[datetime.datetime(2010, 7, 2, 15, 53), 6.0]]),</span>
<span class="go"> (&#39;bl/va/elotech-01/output_2&#39;,</span>
<span class="go">  [[datetime.datetime(2010, 7, 2, 15, 53, 11), 0.0]]),</span>
<span class="go"> (&#39;bl/va/elotech-01/output_3&#39;,</span>
<span class="go">  [[datetime.datetime(2010, 7, 2, 15, 53, 23), 14.0]]),</span>
<span class="go"> (&#39;bl/va/elotech-01/output_4&#39;,</span>
<span class="go">  [[datetime.datetime(2010, 7, 2, 15, 52, 40), 20.0]]),</span>
<span class="go">...</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-information-about-attributes-archived">
<h3>Getting information about attributes archived<a class="headerlink" href="#getting-information-about-attributes-archived" title="Permalink to this headline">¶</a></h3>
<div class="section" id="getting-the-total-number-of-attributes">
<h4>Getting the total number of attributes:<a class="headerlink" href="#getting-the-total-number-of-attributes" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ArchivingAPI</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span> <span class="c1">#All the attributes in history</span>
<span class="nb">len</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">archiving_mode</span><span class="p">])</span> <span class="c1">#Attributes configured</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="getting-the-configuration-of-attribute-s">
<h4>Getting the configuration of attribute(s):<a class="headerlink" href="#getting-the-configuration-of-attribute-s" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#Getting as string</span>
<span class="n">modes</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;rs/da/bpm-07/CompensateTune&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">archiving_mode</span>

<span class="c1">#Getting it as a dict</span>
<span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;sr/da/bpm-07/CompensateTune&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extractModeString</span><span class="p">()</span>

<span class="c1">#OR</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">modes_to_dict</span><span class="p">(</span><span class="n">modes</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="getting-the-list-of-attributes-not-updated-in-the-last-hour">
<h4>Getting the list of attributes not updated in the last hour:<a class="headerlink" href="#getting-the-list-of-attributes-not-updated-in-the-last-hour" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">failed</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">get_attribute_failed</span><span class="p">(</span><span class="mi">3600</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="getting-values-for-an-attribute">
<h4>Getting values for an attribute:<a class="headerlink" href="#getting-values-for-an-attribute" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span><span class="o">,</span><span class="nn">time</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">Reader</span><span class="p">()</span> <span class="c1">#An HDB Reader object using HdbExtractors</span>
<span class="c1">#OR</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">config</span><span class="o">=</span><span class="s1">&#39;pim:pam@pum&#39;</span><span class="p">)</span> <span class="c1">#An HDB reader accessing to MySQL</span>

<span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;bo04/va/ipct-05/state&#39;</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="c1">#5days</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">get_attribute_values</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span><span class="o">*</span><span class="n">dates</span><span class="p">)</span> <span class="c1">#it returns a list of (epoch,value) tuples</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="exporting-values-from-a-list-of-attributes-as-a-text-csv-ascii-file">
<h3>Exporting values from a list of attributes as a text (csv / ascii) file<a class="headerlink" href="#exporting-values-from-a-list-of-attributes-as-a-text-csv-ascii-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyTangoArchiving</span> <span class="kn">import</span> <span class="n">Reader</span>
<span class="n">rd</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span> <span class="c1">#If HdbExtractor.DbConfig property is set one argument is enough</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span>
         <span class="s1">&#39;bl11-ncd/vc/eps-plc-01/pt100_1&#39;</span><span class="p">,</span>
         <span class="s1">&#39;bl11-ncd/vc/eps-plc-01/pt100_2&#39;</span><span class="p">,</span>
        <span class="p">]</span>

<span class="c1">#If you ignore text argument you will get lists of values, if text=True then you get a tabulated file.</span>
<span class="n">ascii_values</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">get_attributes_values</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span>
                      <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2010-10-22&#39;</span><span class="p">,</span><span class="n">stop_date</span><span class="o">=</span><span class="s1">&#39;2010-10-23&#39;</span><span class="p">,</span>
                      <span class="n">correlate</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="n">ascii_values</span>

<span class="c1">#Save it as .csv if you want ...</span>
<span class="nb">open</span><span class="p">(</span><span class="s1">&#39;myfile.csv&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ascii_values</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="filtering-state-changes-for-a-device">
<h3>Filtering State changes for a device<a class="headerlink" href="#filtering-state-changes-for-a-device" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span> <span class="kn">as</span> <span class="nn">pta</span>
<span class="n">rd</span> <span class="o">=</span> <span class="n">pta</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="s1">&#39;...:...@...&#39;</span><span class="p">)</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">get_attribute_values</span><span class="p">(</span><span class="s1">&#39;bo02/va/ipct-02/state&#39;</span><span class="p">,</span><span class="s1">&#39;2010-05-01 00:00:00&#39;</span><span class="p">,</span><span class="s1">&#39;2010-07-13 00:00:00&#39;</span><span class="p">)</span>
<span class="n">bads</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">!=</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">bads</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">report</span> <span class="o">=</span> <span class="p">[(</span><span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">PyTango</span><span class="o">.</span><span class="n">DevState</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="s1">&#39;None&#39;</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">PyTango</span><span class="o">.</span><span class="n">DevState</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">])]</span> <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="s1">&#39;None&#39;</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">bads</span><span class="p">]</span>

<span class="n">report</span> <span class="o">=</span>
<span class="p">[(</span><span class="s1">&#39;Sat May  1 00:07:03 2010&#39;</span><span class="p">,</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span> <span class="s1">&#39;ON&#39;</span><span class="p">),</span>
<span class="o">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="getting-a-table-with-last-values-for-all-attributes-of-a-same-device">
<h3>Getting a table with last values for all attributes of a same device<a class="headerlink" href="#getting-a-table-with-last-values-for-all-attributes-of-a-same-device" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">hours</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">device</span> <span class="o">=</span> <span class="s1">&#39;bo/va/ipct-05&#39;</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">()</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">device</span><span class="p">)]</span>
<span class="nb">vars</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">attr</span><span class="p">,</span><span class="n">reader</span><span class="o">.</span><span class="n">get_attribute_values</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">hours</span><span class="o">*</span><span class="mi">3600</span><span class="p">))</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">])</span>
<span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">t0</span><span class="p">)]</span><span class="o">+</span>
         <span class="p">[([</span><span class="n">v</span> <span class="k">for</span> <span class="n">t</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">var</span> <span class="k">if</span> <span class="n">t</span><span class="o">&lt;=</span><span class="n">t0</span><span class="p">]</span> <span class="ow">or</span> <span class="p">[</span><span class="bp">None</span><span class="p">])[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">attr</span><span class="p">,</span><span class="n">var</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">vars</span><span class="o">.</span><span class="n">items</span><span class="p">())]</span>
        <span class="k">for</span> <span class="n">t0</span><span class="p">,</span><span class="n">v0</span> <span class="ow">in</span> <span class="nb">vars</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
      <span class="p">[</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">device</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">vars</span><span class="o">.</span><span class="n">keys</span><span class="p">())])]</span><span class="o">+</span>
      <span class="p">[</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">t</span><span class="p">])</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]))</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="using-csv-files">
<h2>Using CSV files<a class="headerlink" href="#using-csv-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loading-an-hdb-tdb-configuration-file">
<h3>Loading an HDB/TDB configuration file<a class="headerlink" href="#loading-an-hdb-tdb-configuration-file" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create-dedicated-archivers-first">
<h4>Create dedicated archivers first<a class="headerlink" href="#create-dedicated-archivers-first" title="Permalink to this headline">¶</a></h4>
<p>If you want to use this option it will require some RAM resources in the
host machine (64MbRAM/250Attributes) and installing the ALBA-Archiving
bliss package.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyTangoArchiving.files</span> <span class="kn">import</span> <span class="n">DedicateArchiversFromConfiguration</span>
<span class="n">DedicateArchiversFromConfiguration</span><span class="p">(</span><span class="s1">&#39;LX_I_Archiving.csv&#39;</span><span class="p">,</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>TDB Archiving works different as it shouldn’t be working on diskless
machines, using instead a centralized host for all archiver devices.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">DedicateArchiversFromConfiguration</span><span class="p">(</span><span class="s1">&#39;LX_I_Archiving.csv&#39;</span><span class="p">,</span><span class="s1">&#39;tdb&#39;</span><span class="p">,</span><span class="n">centralized</span><span class="o">=</span><span class="s1">&#39;archiving01&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="loading-the-csv-files">
<h4>Loading the .csv files<a class="headerlink" href="#loading-the-csv-files" title="Permalink to this headline">¶</a></h4>
<p>All the needed code to do it is:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>

<span class="c1">#With launch=False this function will do a full check of the attributes and print the results</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="s1">&#39;/data/Archiving//LX_I_Archiving_.csv&#39;</span><span class="p">,</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c1">#With launch=True configuration will be recorded and archiving started</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="s1">&#39;/data/Archiving//LX_I_Archiving_.csv&#39;</span><span class="p">,</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1">#To force archiving of all not-failed attributes</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="s1">&#39;/data/Archiving//LX_I_Archiving_.csv&#39;</span><span class="p">,</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1">#Starting archiving in TDB mode (kept 5 days only)</span>
<span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="s1">&#39;/data/Archiving//LX_I_Archiving_.csv&#39;</span><span class="p">,</span><span class="s1">&#39;tdb&#39;</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must take in account the following conditions:</p>
</div>
<ul class="simple">
<li>Names of attributes must match the NAME, not the LABEL! (that’s a common mistake)</li>
<li>Devices providing the attributes must be running when you setup archiving.</li>
<li>Regular expressions are <strong>NOT ALLOWED</strong> (I know previous releases allowed it, but never worked really well)</li>
</ul>
</div>
</div>
<div class="section" id="filtering-a-list-of-csv-configurations-attributes-to-load">
<h3>filtering a list of CSV configurations / attributes to load<a class="headerlink" href="#filtering-a-list-of-csv-configurations-attributes-to-load" title="Permalink to this headline">¶</a></h3>
<p>You can use GetConfigFiles and filters/exclude to select a predefined
list of attributes</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span> <span class="kn">as</span> <span class="nn">pta</span>

<span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;.*&quot;</span><span class="p">}</span>
<span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s2">&quot;(s.*bpm.*)|(s10.*rf.*)|(s14.*rf.*)&quot;</span><span class="p">}</span>

<span class="c1">#TDB</span>
<span class="n">confs</span> <span class="o">=</span> <span class="n">pta</span><span class="o">.</span><span class="n">GetConfigFiles</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="s1">&#39;.*(RF|VC).*&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">confs</span><span class="p">:</span>
    <span class="n">pta</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="n">target</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">dedicated</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">schema</span><span class="o">=</span><span class="s1">&#39;tdb&#39;</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>

<span class="c1">#HDB</span>
<span class="n">confs</span> <span class="o">=</span> <span class="n">pta</span><span class="o">.</span><span class="n">GetConfigFiles</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="s1">&#39;.*BO.*(RF|VC).*&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">confs</span><span class="p">:</span>
    <span class="n">pta</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="n">target</span><span class="p">,</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">dedicated</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">schema</span><span class="o">=</span><span class="s1">&#39;hdb&#39;</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="comparing-a-csv-file-with-the-actual-configuration">
<h3>Comparing a CSV file with the actual configuration<a class="headerlink" href="#comparing-a-csv-file-with-the-actual-configuration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ArchivingAPI</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ParseCSV</span><span class="p">(</span><span class="s1">&#39;Archiving_RF_.csv&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">attr</span><span class="p">,</span><span class="n">conf</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">attr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">attributes</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">archiving_mode</span><span class="p">:</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> not archived!&#39;</span> <span class="o">%</span> <span class="n">attr</span>
    <span class="k">elif</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">modes_to_string</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">check_modes</span><span class="p">(</span><span class="n">conf</span><span class="p">[</span><span class="s1">&#39;modes&#39;</span><span class="p">]))</span><span class="o">!=</span><span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">archiving_mode</span><span class="p">:</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1"> != </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span><span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">modes_to_string</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">check_modes</span><span class="p">(</span><span class="n">conf</span><span class="p">[</span><span class="s1">&#39;modes&#39;</span><span class="p">])),</span><span class="n">api</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">archiving_mode</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="checking-and-restarting-a-known-system-from-a-csv">
<h3>Checking and restarting a known system from a .csv<a class="headerlink" href="#checking-and-restarting-a-known-system-from-a-csv" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyTangoArchiving.files</span> <span class="kn">as</span> <span class="nn">ptaf</span>
<span class="n">borf</span> <span class="o">=</span> <span class="s1">&#39;/data/Archiving/BO_20100603_v2.csv&#39;</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ptaf</span><span class="o">.</span><span class="n">ParseCSV</span><span class="p">(</span><span class="n">borf</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">PyTangoArchiving.utils</span> <span class="kn">as</span> <span class="nn">ptau</span>
<span class="n">hdb</span> <span class="o">=</span> <span class="n">PyTangoArchiving</span><span class="o">.</span><span class="n">ArchivingAPI</span><span class="p">(</span><span class="s1">&#39;hdb&#39;</span><span class="p">)</span>

<span class="n">missing</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;bo/ra/fim-01/remotealarm&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/rfdet1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/rfdet2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/arcdet5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/rfdet3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/arcdet3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/arcdet2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bo/ra/fim-01/vacuum&#39;</span><span class="p">]</span>

<span class="n">ptau</span><span class="o">.</span><span class="n">check_attribute</span><span class="p">(</span><span class="s1">&#39;bo/ra/fim-01/remotealarm&#39;</span><span class="p">)</span>
<span class="n">missing</span> <span class="o">=</span> <span class="s1">&#39;bo/ra/fim-01/arcdet4|bo/ra/fim-01/remotealarm|bo/ra/fim-01/rfdet1|bo/ra/fim-01/rfdet2|bo/ra/fim-01/arcdet5|bo/ra/fim-01/rfdet3|bo/ra/fim-01/arcdet3|bo/ra/fim-01/arcdet2|bo/ra/fim-01/vacuum&#39;</span>

<span class="n">ptaf</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="n">borf</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">missing</span><span class="p">},</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ptaf</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="n">borf</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;bo/ra/eps-plc.*&#39;</span><span class="p">},</span><span class="n">stop</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ptaf</span><span class="o">.</span><span class="n">LoadArchivingConfiguration</span><span class="p">(</span><span class="n">borf</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;bo/ra/eps-plc.*&#39;</span><span class="p">},</span><span class="n">launch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">rfplc</span> <span class="o">=</span> <span class="n">ptaf</span><span class="o">.</span><span class="n">ParseCSV</span><span class="p">(</span><span class="n">borf</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;bo/ra/eps-.*&#39;</span><span class="p">})</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">ptaf</span><span class="o">.</span><span class="n">CheckArchivingConfiguration</span><span class="p">(</span><span class="n">borf</span><span class="p">,</span><span class="n">period</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="how-to-run-device-server-firewall.html" class="btn btn-neutral float-right" title="How to run a device server with an active Windows firewall" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how-to-pytango.html" class="btn btn-neutral" title="How to PyTango" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>