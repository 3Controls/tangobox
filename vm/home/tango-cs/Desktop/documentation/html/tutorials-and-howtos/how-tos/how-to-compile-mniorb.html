

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to cross compile omniORB &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="HOW-TOs" href="index.html"/>
        <link rel="next" title="How to create inheritance link between Tango classes (C++)" href="how-to-create-inheritance-link.html"/>
        <link rel="prev" title="HOW-TOs" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools-and-extensions/index.html">Tools and Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/index.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and How-Tos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">HOW-TOs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to cross compile omniORB</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-create-inheritance-link.html">How to create inheritance link between Tango classes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-deal-string-tango-attribute-cpp.html">How to deal with string Tango attribute (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-device-server-startup-time.html">How to reconnect Database at device server startup time</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-distinguish-clients-on-the-server-side.html">How to distinguish clients on the server side</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-dynamic-attributes-device-class.html">How to add dynamic attributes to a device class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-extract-scalar-attribute.html">How to extract read and set values from a scalar attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-fandango.html">How to Fandango</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-first-device-class.html">How to write your first Device Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-import-classes-to-catalogue.html">How to import multiple device classes to the Catalogue</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-java-server-with-astor.html">Integrate Java Tango servers with Astor</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-with-systemd.html">Tango with systemd integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-pytango.html">How to PyTango</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-pytangoarchiving.html">PyTangoArchiving Recipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-server-firewall.html">How to run a device server with an active Windows firewall</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-servers-on-XP-with-IPv6.html">How to run device servers on Windows XP with IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-start-device-server.html">How to start a device server</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-try-tango.html">How to try Tango Controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-use-tango-servers-without-db.html">Using Tango servers without DB for unit testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tune-polling-code-tango-class.html">How to tune polling by code in a TANGO class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-use-vectors-set-attributes.html">How to use vectors to set attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and How-Tos</a> &raquo;</li>
        
          <li><a href="index.html">HOW-TOs</a> &raquo;</li>
        
      <li>How to cross compile omniORB</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials-and-howtos/how-tos/how-to-compile-mniorb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-cross-compile-omniorb">
<h1>How to cross compile omniORB<a class="headerlink" href="#how-to-cross-compile-omniorb" title="Permalink to this headline">¶</a></h1>
<p>This HowTo gives details on how you can cross compile omniORB.</p>
<p>When used with C++ or Python, Tango requires the <a class="reference external" href="http://omniorb.sourceforge.net">omniORB</a>
librairies. Depending on the hardware on which you want to run Tango
device server or client, it is sometimes needed to cross-compile Tango
and therefore to cross compile omniORB. omniORB is distributed as a set
of CORBA idl and cpp files. When you build omniORB, the idl files are
compiled by a CORBA IDL to C++ compiler before they are sent to a
classical C++ compiler with the set of cpp files in order to build the
libraries. This is represented in the following figure</p>
<p>From this figure it is easay to understand that the first thing which is
done when you build omniORB is to build the IDL to C++ compler which
will be used in the following build steps. When you cross-compile
omniORB, you provide to the configure command line the path to the C++
and C compilers for the target hardware
(CXX=path_to_target_cpp_compiler and
CC=path_to_target_C_compiler). If you don’t take special care,
omniORB build system will create the IDL to C++ compiler using these
tools and it will generate an executable for your target host which will
obviously not run on your compilation host. If for instance, you cross
compile omniORB on a x64 host for a ARM CPU, the IDL to C++ compiler
will be created for the ARM architecture and will certainly not run on
your x64 host.</p>
<p>Here are what you have to type to correctly cross-compile omniORB:</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">TOP</span><span class="o">=</span>/path_to_where_omniORB_has_been_downloaded
<span class="gp">$</span> tar xjf <span class="k">$(</span>TOP<span class="k">)</span>/omniORB-4.1.7.tar.bz2
<span class="gp">$</span> <span class="nb">cd</span> omniORB-4.1.7
<span class="gp">$</span> mkdir build
<span class="gp">$</span> <span class="nb">cd</span> build
<span class="gp">$</span> ../configure --prefix<span class="o">=</span>/opt/tango/orb/omniORB-4.1.7/arm
<span class="go">              CC=/opt/Xilinx/SDK/2013.2/gnu/arm/lin/bin/arm-xilinx-linux-gnueabi-gcc</span>
<span class="go">              CXX=/opt/Xilinx/SDK/2013.2/gnu/arm/lin/bin/arm-xilinx-linux-gnueabi-g++</span>
<span class="go">              --host=arm-xilinx-linux-gnueabi</span>
<span class="go">              --build=x86_64-unknown-linux-gnu</span>
</pre></div>
</td></tr></table></div>
<p>When the configure command is run, the <strong>CC</strong> and <strong>CXX</strong> variables
define the target architecture C and Cpp compilers. the configure
<strong>host</strong> option defines the target architecture while the <strong>build</strong>
option defines the architecture on which the cross compilation is done.</p>
<p>We now need to build the IDL to Cpp compiler</p>
<p>with the local compilers</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> make <span class="nv">CC</span><span class="o">=</span>gcc-4.7 -C src/tool/omniidl/cxx/cccp
<span class="gp">$</span> make <span class="nv">CXX</span><span class="o">=</span>g++-4.7 -C src/tool/omniidl/cxx
<span class="gp">$</span> make <span class="nv">CC</span><span class="o">=</span>gcc-4.7 -C src/tool/omkdepend
</pre></div>
</td></tr></table></div>
<p>There are some small changes required in the omniORB build system: Edit
dir.mk file in following directories:</p>
<ul class="simple">
<li>omniORB-4.1.7/src/appl/omniMapper/dir.mk</li>
<li>omniORB-4.1.7/src/appl/omniNames/dir.mk</li>
<li>omniORB-4.1.7/src/appl/utils/catior/dir.mk</li>
<li>omniORB-4.1.7/src/appl/utils/convertior/dir.mk</li>
<li>omniORB-4.1.7/src/appl/utils/genior/dir.mk</li>
<li>omniORB-4.1.7/src/appl/utils/nameclt/dir.mk</li>
</ul>
<p>to find the definition <strong>&#64;(libs=”$(CORBA_LIB_NODYN)”;
$(CXXExecutable))</strong> and replace it by <strong>&#64;(libs=”$(CORBA_LIB_NODYN)
-lstdc++”; $(CXXExecutable))</strong></p>
<p>Then finally build the omniORB libs</p>
<div class="highlight-console"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> make
<span class="gp">$</span> sudo make install
</pre></div>
</td></tr></table></div>
<p>The&nbsp;omniORB <a class="reference external" href="http://www.omniorb-support.com/omniwiki/CrossCompiling">Wiki</a> and experiments done by ESRF colleagues have been used to write this HowTo.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="how-to-create-inheritance-link.html" class="btn btn-neutral float-right" title="How to create inheritance link between Tango classes (C++)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="HOW-TOs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>