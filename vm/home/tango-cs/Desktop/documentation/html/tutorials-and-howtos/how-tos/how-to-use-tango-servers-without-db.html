

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Tango servers without DB for unit testing &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="HOW-TOs" href="index.html"/>
        <link rel="next" title="How to tune polling by code in a TANGO class" href="how-tune-polling-code-tango-class.html"/>
        <link rel="prev" title="How to try Tango Controls" href="how-to-try-tango.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools-and-extensions/index.html">Tools and Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/index.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and How-Tos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">HOW-TOs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="how-to-compile-mniorb.html">How to cross compile omniORB</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-create-inheritance-link.html">How to create inheritance link between Tango classes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-deal-string-tango-attribute-cpp.html">How to deal with string Tango attribute (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-device-server-startup-time.html">How to reconnect Database at device server startup time</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-distinguish-clients-on-the-server-side.html">How to distinguish clients on the server side</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-dynamic-attributes-device-class.html">How to add dynamic attributes to a device class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-extract-scalar-attribute.html">How to extract read and set values from a scalar attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-fandango.html">How to Fandango</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-first-device-class.html">How to write your first Device Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-import-classes-to-catalogue.html">How to import multiple device classes to the Catalogue</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-java-server-with-astor.html">Integrate Java Tango servers with Astor</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-integrate-with-systemd.html">Tango with systemd integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-pytango.html">How to PyTango</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-pytangoarchiving.html">PyTangoArchiving Recipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-server-firewall.html">How to run a device server with an active Windows firewall</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-device-servers-on-XP-with-IPv6.html">How to run device servers on Windows XP with IPv6</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-start-device-server.html">How to start a device server</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-try-tango.html">How to try Tango Controls</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using Tango servers without DB for unit testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tune-polling-code-tango-class.html">How to tune polling by code in a TANGO class</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-use-vectors-set-attributes.html">How to use vectors to set attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and How-Tos</a> &raquo;</li>
        
          <li><a href="index.html">HOW-TOs</a> &raquo;</li>
        
      <li>Using Tango servers without DB for unit testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials-and-howtos/how-tos/how-to-use-tango-servers-without-db.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-tango-servers-without-db-for-unit-testing">
<h1>Using Tango servers without DB for unit testing<a class="headerlink" href="#using-tango-servers-without-db-for-unit-testing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem-overview">
<h2>Problem overview<a class="headerlink" href="#problem-overview" title="Permalink to this headline">¶</a></h2>
<p>One wants to test own server using full tango stack. This test must not be related to any environment and be performed together with other tests.</p>
</div>
<div class="section" id="detailed-cases">
<h2>Detailed cases<a class="headerlink" href="#detailed-cases" title="Permalink to this headline">¶</a></h2>
<p>Useful for benchmarking. Testing without setting up the whole Tango infrastructure.</p>
</div>
<div class="section" id="solution-overview">
<h2>Solution overview<a class="headerlink" href="#solution-overview" title="Permalink to this headline">¶</a></h2>
<p>It is possible to start Tango server without db: see 9.10 in the Tango book</p>
</div>
<div class="section" id="java">
<h2>Java:<a class="headerlink" href="#java" title="Permalink to this headline">¶</a></h2>
<p>Below is how one can integrate it into JUnit framework</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerTest</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NO_DB_GIOP_PORT</span> <span class="o">=</span> <span class="s">&quot;12345&quot;</span><span class="o">;</span><span class="c1">//any random non-occupied port</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NO_DB_INSTANCE</span> <span class="o">=</span> <span class="s">&quot;test_server&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">NO_DB_DEVICE_NAME</span> <span class="o">=</span> <span class="s">&quot;test/junit/&quot;</span> <span class="o">+</span><span class="n">NO_DB_INSTANCE</span><span class="o">;</span>
        <span class="c1">//our server will run in a dedicated thread</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="n">ExecutorService</span> <span class="n">server</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newSingleThreadExecutor</span><span class="o">(</span><span class="k">new</span> <span class="n">ThreadFactory</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">Thread</span> <span class="nf">newThread</span><span class="o">(</span><span class="n">Runnable</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>
                <span class="n">thread</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;My fancy Tango server&quot;</span><span class="o">);</span>
                <span class="n">thread</span><span class="o">.</span><span class="na">setDaemon</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">thread</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="nd">@Before</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">InterruptedException</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;OAPort&quot;</span><span class="o">,</span> <span class="n">NO_DB_GIOP_PORT</span><span class="o">);</span>

            <span class="kd">final</span> <span class="n">CountDownLatch</span> <span class="n">latch</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CountDownLatch</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">server</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">ServerManager</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">start</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="n">NO_DB_INSTANCE</span><span class="o">,</span> <span class="s">&quot;-nodb&quot;</span><span class="o">,</span> <span class="s">&quot;-dlist&quot;</span><span class="o">,</span> <span class="n">NO_DB_DEVICE_NAME</span><span class="o">},</span> <span class="n">TestServer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span><span class="c1">//TestServer - is our Tango server we want to test against</span>
                    <span class="n">latch</span><span class="o">.</span><span class="na">countDown</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="c1">//make sure server has been started before leaving method</span>
            <span class="n">latch</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@After</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">after</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">server</span><span class="o">.</span><span class="na">shutdownNow</span><span class="o">();</span>
        <span class="o">}</span>


        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetClientId</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="n">TangoProxy</span> <span class="n">proxy</span> <span class="o">=</span> <span class="n">TangoProxies</span><span class="o">.</span><span class="na">newDeviceProxyWrapper</span><span class="o">(</span><span class="s">&quot;tango://localhost:&quot;</span> <span class="o">+</span> <span class="n">NO_DB_GIOP_PORT</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">NO_DB_DEVICE_NAME</span> <span class="o">+</span> <span class="s">&quot;#dbase=no&quot;</span><span class="o">);</span>

            <span class="n">assertSame</span><span class="o">(</span><span class="n">DeviceState</span><span class="o">.</span><span class="na">ON</span><span class="o">,</span><span class="n">proxy</span><span class="o">.</span><span class="na">readAttribute</span><span class="o">(</span><span class="s">&quot;State&quot;</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>It is also possible to use 3rd party Tango server to test against. Suppose our Tango server uses other Tango server to perform its tasks (Data aggregation, state monitoring etc). In this case 3rd party binary can be added to the project. This binary can be then launched from within JUnit test:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="c1">//this test cases uses precompiled TangoTest stored in {PRJ_ROOT}/exec/tango/&lt;win64|debian&gt; folder</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TangoTestProxyWrapperTest</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TANGO_DEV_NAME</span> <span class="o">=</span> <span class="s">&quot;test/local/0&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">TANGO_PORT</span> <span class="o">=</span> <span class="mi">16547</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TEST_TANGO</span> <span class="o">=</span> <span class="s">&quot;tango://localhost:&quot;</span> <span class="o">+</span> <span class="n">TANGO_PORT</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">TANGO_DEV_NAME</span> <span class="o">+</span> <span class="s">&quot;#dbase=no&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">X64</span> <span class="o">=</span> <span class="s">&quot;x64&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">LINUX</span> <span class="o">=</span> <span class="s">&quot;linux&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">WINDOWS_7</span> <span class="o">=</span> <span class="s">&quot;windows 7&quot;</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">AMD64</span> <span class="o">=</span> <span class="s">&quot;amd64&quot;</span><span class="o">;</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="n">Process</span> <span class="n">PRC</span><span class="o">;</span>

        <span class="nd">@BeforeClass</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">beforeClass</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">crtDir</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;user.dir&quot;</span><span class="o">);</span>
            <span class="c1">//TODO define executable according to current OS</span>
            <span class="n">String</span> <span class="n">os</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;os.name&quot;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">arch</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;os.arch&quot;</span><span class="o">);</span>
            <span class="n">StringBuilder</span> <span class="n">bld</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">(</span><span class="n">crtDir</span><span class="o">);</span>
            <span class="c1">//TODO other platforms or rely on the environmet</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">LINUX</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">os</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">AMD64</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">arch</span><span class="o">))</span>
                <span class="n">bld</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;/exec/tango/debian/&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;TangoTest&quot;</span><span class="o">);</span>
            <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">WINDOWS_7</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">os</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">AMD64</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">arch</span><span class="o">))</span>
                <span class="n">bld</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;\\exec\\tango\\win64\\&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;TangoTest&quot;</span><span class="o">);</span>
            <span class="k">else</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Unsupported platform: name=%s arch=%s&quot;</span><span class="o">,</span> <span class="n">os</span><span class="o">,</span> <span class="n">arch</span><span class="o">));</span>

            <span class="n">PRC</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessBuilder</span><span class="o">(</span><span class="n">bld</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span> <span class="s">&quot;test&quot;</span><span class="o">,</span> <span class="s">&quot;-ORBendPoint&quot;</span><span class="o">,</span> <span class="s">&quot;giop:tcp::&quot;</span> <span class="o">+</span> <span class="n">TANGO_PORT</span><span class="o">,</span> <span class="s">&quot;-nodb&quot;</span><span class="o">,</span> <span class="s">&quot;-dlist&quot;</span><span class="o">,</span> <span class="n">TANGO_DEV_NAME</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">start</span><span class="o">();</span>

            <span class="c1">//drain slave&#39;s out stream</span>
            <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="kt">char</span> <span class="n">bite</span><span class="o">;</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="k">while</span> <span class="o">((</span><span class="n">bite</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">PRC</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">().</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">bite</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ignore</span><span class="o">)</span> <span class="o">{</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}).</span><span class="na">start</span><span class="o">();</span>

            <span class="c1">//drains slave&#39;s err stream</span>
            <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="kt">char</span> <span class="n">bite</span><span class="o">;</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="k">while</span> <span class="o">((</span><span class="n">bite</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">PRC</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">().</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">bite</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ignore</span><span class="o">)</span> <span class="o">{</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@AfterClass</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">afterClass</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="n">PRC</span><span class="o">.</span><span class="na">destroy</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">//this test directly writes/reads  to/from TangoTest double_scalar_w</span>
        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWriteReadAttribute_Double</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="n">TangoProxy</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">TangoProxies</span><span class="o">.</span><span class="na">newDeviceProxyWrapper</span><span class="o">(</span><span class="n">TEST_TANGO</span><span class="o">);</span>

            <span class="n">instance</span><span class="o">.</span><span class="na">writeAttribute</span><span class="o">(</span><span class="s">&quot;double_scalar_w&quot;</span><span class="o">,</span> <span class="mf">0.1984D</span><span class="o">);</span>

            <span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.&lt;</span><span class="n">Double</span><span class="o">&gt;</span><span class="n">readAttribute</span><span class="o">(</span><span class="s">&quot;double_scalar_w&quot;</span><span class="o">);</span>

            <span class="n">assertEquals</span><span class="o">(</span><span class="mf">0.1984D</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//in other test case one can create instance of his own server (see previous code snippet)</span>

    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="cpp">
<h2>CPP:<a class="headerlink" href="#cpp" title="Permalink to this headline">¶</a></h2>
<p>//TODO</p>
</div>
<div class="section" id="python">
<h2>Python:<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>//TODO</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="how-tune-polling-code-tango-class.html" class="btn btn-neutral float-right" title="How to tune polling by code in a TANGO class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how-to-try-tango.html" class="btn btn-neutral" title="How to try Tango Controls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>