

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tango ATK Tutorial &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="Tango Application Toolkit “ATK”" href="index.html"/>
        <link rel="next" title="ATK Java documentation" href="atk_java_doc.html"/>
        <link rel="prev" title="Tango Application Toolkit “ATK”" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tools and Extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../astor/index.html">Astor (TANGO Manager)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jive/index.html">Jive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pogo/index.html">Pogo (Class Generator)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdraw/jdraw.html">Synoptic and JDraw</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tango Application Toolkit “ATK”</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tango ATK Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="atk_java_doc.html">ATK Java documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="atkpanel.html">ATKPanel Manual</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logviewer/index.html">LogViewer Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qtango/qtango.html">QTango</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canone.html">Canone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../archiving/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../archiving/HDB.html">HDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../archiving/HDB++.html">HDB++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../taurus/index.html">Taurus (Python GUI library)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/c-lang.html">C Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/matlab-and-octave.html">Matlab &amp; Octave</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/labVIEW.html">LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/igor-pro.html">Igor Pro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings/panorama.html">Panorama</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/advanced/rest-api.html">Tango REST API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-howtos/index.html">Tutorials and How-Tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tools and Extensions</a> &raquo;</li>
        
          <li><a href="index.html">Tango Application Toolkit “ATK”</a> &raquo;</li>
        
      <li>Tango ATK Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tools-and-extensions/atk/atk.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tango-atk-tutorial">
<h1>Tango ATK Tutorial<a class="headerlink" href="#tango-atk-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This document is a practical guide for Tango ATK programmers and
includes several trails with examples and demonstrations. Most of the
examples and demonstrations are provided as Macromedia Flash documents.</p>
<p>In this document we assume that the reader has a good knowledge of the
Java programming language, and a thorough understanding of
object-oriented programming. Also, it is expected that the reader is
fluent in all aspects regarding Tango devices, attributes, and commands.</p>
<p>Before going through the trails and examples, the Tango ATK architecture
and key concepts are introduced. After this introduction the rest of the
document is organized in a set of trails.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Tango Application Toolkit also called “ATK” is a client framework for
building applications based on Java Swing in a Tango control system.</p>
<div class="section" id="goals-of-tango-atk">
<h3>Goals of Tango ATK<a class="headerlink" href="#goals-of-tango-atk" title="Permalink to this headline">¶</a></h3>
<p>The main goals of ATK are the following:</p>
<ol class="arabic simple">
<li>Speeding up the development of Tango graphical clients.</li>
<li>Standardizing the look and feel of Tango applications.</li>
<li>Implementing the core of “any” Tango application.</li>
</ol>
<p>To achieve the first and the second goals ATK provides several swing
based components to view and/or to interact with Tango device attributes
and Tango device commands and also a complete synoptic viewing system.
To achieve the third goal ATK takes in charge the automatic update of
device data either through Tango events or by polling the device
attributes. ATK takes also in charge the error handling and display. The
ATK swing components are the Java Beans, so they can easily be added to
a Java IDE (like NetBeans) to speed up the development of graphical
control applications.</p>
</div>
<div class="section" id="the-software-architecture-of-tango-atk">
<h3>The Software Architecture of Tango ATK<a class="headerlink" href="#the-software-architecture-of-tango-atk" title="Permalink to this headline">¶</a></h3>
<p>Tango ATK is developed using the
<a class="reference external" href="http://java.sun.com/blueprints/patterns/MVC.html">Model-View-Controller</a>
design pattern also used in the Java Swing package. The Tango basic
objects such as device attributes and device commands provide the model
for the ATK Swing based components called viewers. The models and the
viewers are regrouped in two separate packages respectively ATKCore and
ATKWidget.</p>
<p><a class="reference internal" href="../../_images/image1.jpeg"><img alt="image0" src="../../_images/image1.jpeg" style="width: 3.21458in; height: 2.85139in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ATK is based on Swing. Mixing the use of other “non swing” objects such
as SWT (eclipse) with ATK is not recommended.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ATK hides Tango Java API (TangORB). It is highly recommended not to use
TangORB methods and objects directly in the application code. Always use
the interface provided by ATK to access the control system</p>
</div>
</div>
<div class="section" id="the-key-concepts-of-tango-atk">
<h3>The key concepts of Tango ATK<a class="headerlink" href="#the-key-concepts-of-tango-atk" title="Permalink to this headline">¶</a></h3>
<p>Reminder: the central Tango component is the DEVICE. The Tango control
system can be seen as a collection of devices distributed over the
network. The tango devices provide attributes (for reading and setting
data) and commands.</p>
<p>The central ATK components, to access the Tango control system, are:
attributes and commands and not the devices. Through Tango Java API
(TangORB) the control system is a collection of devices where through
ATK the control system is a collection of attributes and commands.</p>
<p>In addition to ATK attributes and ATK commands ATK provides two
components, which are ATK attribute lists and ATK command lists.</p>
<p>The central ATK components are:</p>
<ol class="arabic simple">
<li>ATK Attribute (interface to Tango device attribute),</li>
<li>ATK Command (interface to Tango Device command),</li>
<li>ATK AttributeList (collection of ATK Attributes)</li>
<li>ATK CommandList (collection of ATK Commands).</li>
</ol>
</div>
<div class="section" id="tango-atk-viewers">
<h3>Tango ATK viewers<a class="headerlink" href="#tango-atk-viewers" title="Permalink to this headline">¶</a></h3>
<p>ATK viewers are provided as Java Beans and as such they can easily be
added in a Java IDE (like NetBeans) to speed up the development of the
graphical applications. This way the programmer can easily build up his
(her) panels, mixing pure Swing objects and Tango ATK viewers.</p>
<p>ATK viewers are provided for different types of Tango Components. They
can be divided into different categories such as: error history window,
error popup window, simple attribute viewers / editors, attribute list
viewers, simple command viewers, command list viewers, …etc.</p>
<p><a class="reference internal" href="../../_images/image2.jpeg"><img alt="image1" src="../../_images/image2.jpeg" style="width: 5.64861in; height: 4.40486in;" /></a></p>
</div>
<div class="section" id="synoptic-drawing-and-viewing">
<h3>Synoptic drawing and viewing<a class="headerlink" href="#synoptic-drawing-and-viewing" title="Permalink to this headline">¶</a></h3>
<p>A synoptic is a drawing in which each object can be linked to a Tango
object. A part of the synoptic drawing can be linked to the state
attribute of a Tango device where another part is associated to a
numerical attribute of another Tango device. The main idea of synoptic
drawing and viewing system is to provide the application designer with a
simple and a flexible way to draw a synoptic and to animate it at
runtime according to the values and states read from the control system.
ATK provides two components for this purpose:</p>
<ul class="simple">
<li>A graphical editor called “Jdraw”. This tool is used during the
design phase to draw and to specify the synoptic. The synoptic is
saved to a file.</li>
<li>A synoptic viewer called “SynopticFileViewer”. This viewer is used in
the graphical user interface of the application. SynopticFileViewer
loads and browses the synoptic drawing file and animates its elements
at runtime according to their state or to their value.</li>
</ul>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The following short tutorial takes you through some of the basic steps
necessary to develop a Tango Java application based on Tango ATK.</p>
<p>In this tutorial we don’t use any Java IDE features. All the java code
is entered manually using a java source editor. The NetBeans java source
editor is used as any source editor.</p>
<p>Let’s specify the application we want to build in terms of the
<a class="reference external" href="http://java.sun.com/blueprints/patterns/MVC.html">Model-View-Controller</a>
design pattern described before.</p>
<p>Our “Getting Started” application will need to show two tango device
attributes and one tango device command all related to the same device.
The tango device name used in this tutorial is <em>“jlp/test/1”</em>. The
application will show the “state” and the “att_spectrum” attributes of
this device and will give access to its “Init” command.</p>
<ol class="arabic simple">
<li>The type of the “state” attribute (<em>jlp/test/1/state</em>) is “DevState”
and its format is “Scalar”</li>
<li>The type of the “att_spectrum” attribute (<em>jlp/test/1/att_spectrum</em>)
is “DevDouble” and its format is “Spectrum”</li>
<li>The “Init” command (<em>jlp/test/1/Init</em>) has no input and no output
argument (input and output argument types are DevVoid)</li>
</ol>
<p>The ATKCore components are used to create and initialise the “model”
part of the design pattern:</p>
<ol class="arabic simple">
<li>One attribute list,</li>
<li>Two attributes (<em>jlp/test/1/state</em>, <em>jlp/test/1/att_spectrum</em>),</li>
<li>One command list,</li>
<li>One command (<em>jlp/test/1/Init</em>).</li>
</ol>
<p>The ATKWidget components are used to create and initialise the <em>“view”</em>
part of the design pattern. These components are the objects adapted to
the type of the tango component we want to visualize. They are also
called <strong>“viewers”</strong> (attribute viewers, command viewers, … etc.).</p>
<ol class="arabic simple">
<li>One State viewer (a viewer adapted to the DevState Scalar attributes)</li>
<li>One NumberSpectrum viewer (a viewer adapted to any numerical spectrum
attribute)</li>
<li>One VoidVoidCommand viewer (a viewer adapted to the any command with
no input and no output argument).</li>
</ol>
<p>The controller part consists of making the relationship between the
<em>“view”</em> components and the <em>“model”</em> components. Calling the <em>“setModel”</em>
method of the view object makes this relationship. For example the call
<em>“stateViewer.setModel(stateAtt)”</em> will make the relationship between
these two objects.</p>
<p>Click on the following link to view a Flash demo of how to build the
<em>“GettingStarted”</em> application.</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/GettingStarted.htm">Getting Started (Flash
Demo)</a></p>
<div class="section" id="the-structure-of-an-atk-application">
<h3>The Structure of an ATK application<a class="headerlink" href="#the-structure-of-an-atk-application" title="Permalink to this headline">¶</a></h3>
<p>Any ATK application should perform a minimum set of operations. The
following lists this minimum set of operations:</p>
<ol class="arabic simple">
<li>Declaration and initialization of ATKCore objects (AttributeLists,
CommandLists, individual ATKCore attributes and individual ATKCore
commands).</li>
<li>Declaration and instantiation of ATKWidget Error viewers to handle
errors</li>
<li>Connection to attributes and commands by adding them to the
appropriate list</li>
<li>Creation of the specific Attribute and command viewers, and add them
to a swing window</li>
<li>Associate each viewer to an appropriate ATKCore attribute or command</li>
<li>Start the refresher thread associated to the attribute list</li>
</ol>
<p>The following slide show will present in detail the skeleton of an ATK
application :</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/AtkSkeleton.htm">ATK application skeleton (Flash Slide
Show)</a></p>
</div>
<div class="section" id="using-atk-inside-a-java-ide-netbeans">
<h3>Using ATK inside a Java IDE (NetBeans)<a class="headerlink" href="#using-atk-inside-a-java-ide-netbeans" title="Permalink to this headline">¶</a></h3>
<p>Several Java IDEs &nbsp;(Integrated Design Environments)&nbsp;are available on the
market and also as freeware.&nbsp;You can search the Internet to choose the
most appropriate one for your usage.&nbsp;Here you can find some links to
start with:</p>
<p><a class="reference external" href="http://www.netbeans.org/">NetBeans (free download)</a></p>
<p><a class="reference external" href="http://www.eclipse.org/">Eclipse &nbsp;(free download)</a></p>
<p><a class="reference external" href="http://www.jetbrains.com/idea/">Intelligent Idea &nbsp;(commercial
tool)</a></p>
<p>The use of the Java IDEs especially those including a good graphical
user interface builder speed up the development of Tango ATK
applications.&nbsp;From now on all the examples in this tutorial are made
using the NetBeans 5.5 or 6.1, Java IDE.&nbsp;The present section presents
the manner in which the ATK Java Beans can be integrated to the NetBeans
Palette and used to build the user interface of the final ATK
application.</p>
<p>If you are using another Java IDE please refer to its documentation to
find out how to integrate and use the ATK Java Beans inside the IDE, to
build a graphical user interface.</p>
<div class="section" id="learning-netbeans">
<h4>Learning NetBeans<a class="headerlink" href="#learning-netbeans" title="Permalink to this headline">¶</a></h4>
<p>You should first download and install the NetBeans IDE from <a class="reference external" href="http://www.netbeans.org">NetBeans
Web site</a>. HIf you have never installed JDK
on your computer or if the JDK on your computer is out of date, you may
consider to install the bundle NetBeans+JDK depending on the version of
NetBeans and JDK you wish to install. For example inside the download
page of NetBeans you can find :</p>
<p><a class="reference external" href="http://java.sun.com/j2se/1.5.0/download-netbeans.html">NetBeans IDE 6.1 with JDK 5.0
Bundle</a></p>
<p>This download will install JDK 1.5 and NetBeans 6.1 in a single
operation.</p>
<p>Once the NetBeans is installed you can browse:
<a class="reference external" href="http://www.netbeans.org/kb/index.html">NetBeans Tutorials,&nbsp;Guides,&nbsp;and Articles</a>
which can help you, learn more about NetBeans.</p>
<p>If you are a beginner with NetBeans we recommend you to go through the
following quick start guides:</p>
<p><a class="reference external" href="https://netbeans.org/kb/docs/intro-screencasts.html">Guided Video Tour of NetBeans IDE</a></p>
</div>
</div>
<div class="section" id="create-an-atk-application-project-in-netbeans">
<h3>Create an ATK Application project in NetBeans<a class="headerlink" href="#create-an-atk-application-project-in-netbeans" title="Permalink to this headline">¶</a></h3>
<p>To create and ATK application project,&nbsp;you may go through the following
steps:</p>
<ol class="arabic simple">
<li>Create the NetBeans Java Application Project,</li>
<li>Add the Tango and ATK jar files in the project ’s class path,</li>
<li>Add several ATK Java Beans (ATK viewers)&nbsp;to the NetBeans palette.</li>
</ol>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/NetBeansATK1.htm">ATK application project using NetBeans (Flash
Demo)</a></p>
</div>
<div class="section" id="first-atk-simple-gui-application">
<h3>First ATK Simple GUI application<a class="headerlink" href="#first-atk-simple-gui-application" title="Permalink to this headline">¶</a></h3>
<p>Now we build a simple Tango GUI using ATK viewers, which have been added
to the NetBeans palette. Here are the steps to follow to build this GUI:</p>
<ol class="arabic simple">
<li>Create a source package,</li>
<li>Create a new Jframe form in this package,</li>
<li>Add ATK beans from the palette into the form and place and resize
them as you wish,</li>
<li>Add the necessary source code to create and to initialize the ATKCore
(model) objects,</li>
<li>Associate each viewer with its model,</li>
<li>Start the ATK refresher(s),</li>
<li>Build and run this GUI.</li>
</ol>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/NetBeansATK2.htm">First ATK Simple GUI appliction (Flash
Demo)</a></p>
</div>
</div>
<div class="section" id="atk-quick-tour">
<h2>ATK Quick Tour<a class="headerlink" href="#atk-quick-tour" title="Permalink to this headline">¶</a></h2>
<p>This section includes the first list of tutorials, which give you a
quick tour of the Tango ATK components by guiding you through the
creation of a simple generic application very similar to AtkPanel.
During this quick tour you will learn how to view device state and
status attributes, and how to display a collection of tango scalar
attributes all aligned with each other. You will also use a viewer to
display a collection of tango device commands.</p>
<div class="section" id="device-state-and-device-status">
<h3>Device state and device status<a class="headerlink" href="#device-state-and-device-status" title="Permalink to this headline">¶</a></h3>
<p>The state and the status of the device are two attributes of any Tango
device (IDL 3 and above). Atk provides two attribute viewers one called
<strong>StateViewer</strong> and the other <strong>StatusViewer</strong> to display them. These
viewers are included in the <strong>fr.esrf.tangoatk.widget.attribute</strong>
package.</p>
<p>The model for the <strong>StateViewer</strong> is the state attribute
(DevStateScalar) and the model for the <strong>StatusViewer</strong> is any scalar
attribute of type String (StringScalarAttribute).</p>
<p>You can go through the following simple demo to see how to use these two
viewers.</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/StateStatusViewer.htm">State and Status viewers (flash
demo)</a></p>
</div>
<div class="section" id="display-a-list-of-scalar-attributes">
<h3>Display a list of scalar attributes<a class="headerlink" href="#display-a-list-of-scalar-attributes" title="Permalink to this headline">¶</a></h3>
<p>The ATK attribute list viewers / setters are provided to be able to
display a collection of attributes all aligned together. In fact, the
ATK attribute list viewers handle only scalar attributes. An attribute
list <strong>viewer’s model is an attribute list</strong>. This means the model for
this type of viewers cannot be an individual attribute and should be an
attribute list. The attribute list viewers are all included in the
<strong>fr.esrf.tangoatk.widget.attribute</strong> package.</p>
<p>The ATK list viewers provide the application with three major
advantages:</p>
<ul class="simple">
<li>The first advantage is that all the single attribute viewers are
aligned in a coherent manner inside the attribute list viewer.</li>
<li>The second advantage is that the application can be “generic”. An
application program with no knowledge of the exact names and types of
the scalar attributes of a particular device, can display all of them
easily with two lines of code.</li>
<li>The third advantage is that the application programmer does not need
to know which type of attribute viewer is adapted to which type of
tango attribute. The ATK list viewers automatically select the
adapted viewer and / or setter for each type of device attribute.</li>
</ul>
<p>There are three classes for attribute list viewing:</p>
<ul class="simple">
<li><strong>ScalarListViewer</strong>,</li>
<li><strong>NumberScalarListViewer</strong>,</li>
<li><strong>ScalarListSetter</strong>.</li>
</ul>
<p>The ScalarListViewer and NumberScalarListViewer are almost the same. The
only difference is that the NumberScalarList viewer will display only
the scalar attributes which are numerical where ScalarListViewer will
display also StringScalar attributes, BooleanScalar and EnumScalar
attributes in addition to the numerical scalar attributes.</p>
<p>The attributes, members of the attribute list are displayed vertically.
In each line an individual attribute is displayed in the following
manner:</p>
<ol class="arabic simple">
<li>At the left the “label” property of the tango attribute,</li>
<li>Next to the label the “read” value of the attribute is displayed
according to the “format” and the “unit” properties of the tango
attribute,</li>
<li>In the third column the “setpoint” of the tango attribute is
displayed inside a viewer (mostly called editor), which allows
setting the attribute value,</li>
<li>The last (forth) column is used to display a pushbutton with three
dots. A click on this pushbutton pops up a window called
“SimplePropertyFrame”. In this window the user can modify any
property of the tango attribute such as: label, min alarm, max alarm,
unit,..etc.</li>
</ol>
<p>The application programmer can easily hide any three columns among four.
There is always one column, which cannot be hidden.</p>
<ul class="simple">
<li><strong>ScalarListViewer</strong>: three columns, which can be hidden, are
label, setPoint editor (setter), and property button. The “read”
value column cannot be hidden. All the attributes, members of the
Attributelist model should be scalar attributes. All attributes with
another format (Spectrum) will be ignored.</li>
<li><strong>NumberScalarListViewer</strong>: three columns, which can be hidden,
are label, setPoint editor (setter), and property button. The “read”
value column cannot be hidden. All the attributes, members of the
Attributelist model should be scalar and numerical. All attributes
with another type (String) and / or format (Spectrum) will be
ignored.</li>
<li><strong>ScalarListSetter</strong>: three columns, which can be hidden, are
label, “read” value, and property button. The setPoint editor
(setter) column cannot be hidden. All the attributes, members of the
attributeList model must be scalar and writable. The read-only
attributes members of the attributeList model are ignored</li>
</ul>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/AttListViewersAndSetters.htm">ScalarListViewers and ScalarListSetters (Flash
Demo)</a></p>
</div>
<div class="section" id="view-a-list-of-device-commands">
<h3>View a list of device commands<a class="headerlink" href="#view-a-list-of-device-commands" title="Permalink to this headline">¶</a></h3>
<p>There is only one class provided for the command list viewing:
&nbsp;<strong>CommandComboViewer.</strong> This viewer is based on the Swing
“JComboBox”.The user can select any of the commands displayed in the
list and send it to the device. The selection of an item in this list
leads to the execution of the device command.</p>
<p>The viewers studied above (StateViewer, StatusViewer, ScalarListViewer
and CommandComboViewer) can be used to build a generic tango device
panel.</p>
</div>
<div class="section" id="a-generic-tango-device-panel">
<h3>A generic tango device panel<a class="headerlink" href="#a-generic-tango-device-panel" title="Permalink to this headline">¶</a></h3>
<p>The application we try to build in this tutorial is a generic tango
device panel, which displays all the U <strong>scalar</strong> U attributes (no
spectrum attribute, no image attribute) of a device and gives access to
all commands of the same device. The application is generic because it
has no knowledge of the attribute names and command names of the device.</p>
<p>The device name should be passed as a parameter through the class
constructor so that this panel can be used for any Tango device.</p>
<p>The ATK viewers we will use for this exercise are:</p>
<ol class="arabic simple">
<li><strong>StateViewer</strong> (fr.esrf.tangoatk.widget.attribute.StateViewer),</li>
<li><strong>StatusViewer</strong> (fr.esrf.tangoatk.widget.attribute.StatusViewer),</li>
<li><strong>ScalarListViewer</strong>
(fr.esrf.tangoatk.widget.attribute.ScalarListViewer),</li>
<li><strong>CommandComboViewer</strong>
(fr.esrf.tangoatk.widget.command.CommandComboViewer).</li>
</ol>
<p>The two last viewers are so-called “list viewers”. It means that, their
corresponding model should not be an individual attribute or an
individual command. Their corresponding model should be respectively an
attribute list and a command list.</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/DevPanel.htm">Generic single device panel (Flash
demo)</a></p>
</div>
</div>
<div class="section" id="atk-guided-tour">
<h2>ATK Guided Tour<a class="headerlink" href="#atk-guided-tour" title="Permalink to this headline">¶</a></h2>
<p>In this chapter you will study the essential components of the ATK
starting with the simplest ones used to visualize individual tango
attributes and / or tango commands. The final part of this chapter is
dedicated to the synoptic system provided with ATK. You can study this
chapter in any order.</p>
<div class="section" id="scalar-attributes">
<h3>Scalar attributes<a class="headerlink" href="#scalar-attributes" title="Permalink to this headline">¶</a></h3>
<p>A scalar attribute is a Tango attribute whose format is Scalar whatever
the data type of the attribute. In this chapter we will see how to view
and / or set a single scalar attribute. We will also see how to view a
collection of scalar attributes.</p>
<div class="section" id="one-single-scalar-attribute">
<h4>One single scalar attribute<a class="headerlink" href="#one-single-scalar-attribute" title="Permalink to this headline">¶</a></h4>
<div class="section" id="use-a-generic-scalar-attribute-viewer-used-to-view-and-or-to-set">
<h5>Use a generic scalar attribute viewer (used to view and / or to set)<a class="headerlink" href="#use-a-generic-scalar-attribute-viewer-used-to-view-and-or-to-set" title="Permalink to this headline">¶</a></h5>
<p>This solution consists of using the same viewer for any type of scalar
attributes (number, string, boolean). The attributeList viewers such as
ScalarListViewer can be used to view a single scalar attribute. All you
have to do is to build an attributeList in which you add only one single
scalar attribute, which is the one you want to view. Create a
ScalarListViewer and set it’s model to this attributeList with one
single attribute inside. See the code sample below:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>AttributeList attl = new AttributeList;
Try
{
    attl.add(“my/test/device/onescalaratt”);
    ScalarListViewer slv = new ScalarListViewer();
    sv.setModel(attl);
}
catch ()
{

}
</pre></div>
</td></tr></table></div>
<p>The use of ScalarListViewer even for an individual attribute allows that
the attribute value is displayed and formatted with it’s unit and
eventually accompanied of it’s label, a value setter, and a pushbutton
to access and to edit the other attribute properties.</p>
<p>Moreover the ScalarListViewer automatically uses the appropriate viewer
according to the type of the attribute. For example a
BooleanCheckBoxViewer is used for the Boolean attributes and a
SimpleScalarViewer is used for numerical and string attributes. For this
reason the use of scalarListViewer makes the application code to be
independent of the type of the scalar attribute to be displayed.</p>
<p>The ScalarListViewer is used to display the read value of the attribute
and also to set the attribute if the attribute is writable.</p>
<p>By hiding one or the other part of the scalarListViewer (label, setter,
propertyButton) you can adapt the display to what you really want to
make available to the application’s user. The screen shots below show
the same scalar attribute displayed always with a ScalarListViewer. From
left to right, the propertyButton, the setter and finally the label have
been hidden.</p>
<p><a class="reference internal" href="../../_images/image6.jpeg"><img alt="image2" src="../../_images/image6.jpeg" style="width: 6.29167in; height: 1.04792in;" /></a></p>
</div>
<div class="section" id="using-a-specific-viewer-setter-adapted-to-the-attribute-type">
<h5>Using a specific viewer / setter adapted to the attribute type<a class="headerlink" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type" title="Permalink to this headline">¶</a></h5>
<p>The use of specific viewers is dependent on the type of the scalar
attribute to view and or to set. Normally a specific ATK viewer is
designed either to display the read value of the attribute or to set the
setPoint value of a writable attribute. But the specific ATK viewer
generally does not do both of them. As we have seen before the list
viewers (generic attribute viewers) can do both of these two functions
read / write.</p>
<p>The specific viewer to use depends on the data type of the attribute and
the fact that we want to use it for setting the attribute or only to
display the read value. Therefore the source code also depends on the
type of the attribute and the viewer. The code sample below is given for
a NumberScalar attribute displayed by a SimpleScalarViewer. This code
sample can be modified and adapted to other attribute types and viewers
or setters.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>AttributeList attl = new AttributeList;
Try
{
    INumberScalar ins = (InumberScalar) attl.add(“my/test/device/oneNumberScalarAtt”);
    SimpleScalarViewer ssv = new SimpleScalarViewer();
    slv.setModel(ins);
}
catch ()
{

}
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using individual attribute viewers (instead of attribute
list viewers) we need to keep a reference to the scalar attribute (“ins”
in the code sample) and use it to set the model of the scalar attribute
viewer.</p>
</div>
<p>The code sample above has been adapted so that instead of viewing the
read value of the attribute we want to set the setPoint value of it.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>AttributeList attl = new AttributeList;
Try
{
    INumberScalar ins = (InumberScalar) attl.add(“my/test/device/oneNumberScalarAtt”);
    NumberScalarWheelEditor nswe = new NumberScalarWheelEditor();
    nswe.setModel(ins);
}
catch ()
{

}
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="numberscalar-attributes">
<h5>NumberScalar attributes<a class="headerlink" href="#numberscalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>By number scalar attribute we mean any Tango Attribute whose format is
“Scalar” and whose data type is one of the numerical types. No matter if
it’s a DevLong, DevDouble , or whatever numerical type.</p>
<p>There are several viewers, which can be used to display the “read” value
of a Number Scalar attribute. There are also several classes in ATK
provided for setting the value of a number scalar attribute</p>
<ol class="arabic simple">
<li><strong>SimpleScalarViewer</strong> : can be used to display the read value of
a NumberScalar or a StringScalar attribute. The value of the
NumberScalar attribute is formatted according to the “format”
attribute property. The attribute value is displayed followed by it’s
unit (the attribute property unit). This viewer is actually the one
used by ScalarListViewer to display the value of any Number or String
scalar attribute.</li>
<li><strong>NumberScalarViewer</strong> : can be used to display the read value of
a NumberScalar. This viewer has a different character spacing and
does not display the unit.This viewer should be used if you wish to
align vertically the read value of a numberScalar attribute with it’s
setPoint value displayed with a NumberScalarWheelEditor.</li>
<li><strong>NumberScalarProgressBar</strong> : gives a view of the attribute based
on a progress bar.</li>
<li><strong>NumberScalarWheelEditor</strong> : displays the setpoint value of a
NumberScalar and the user can use the top and bottom arrow buttons to
set the NumberScalar attribute value. The value of the NumberScalar
attribute is formatted according to the “format” attribute property.
The unit is not displayed. This component is the default component
used for setting a NumberScalar attribute in ScalarListViewer.</li>
<li><strong>NumberScalarComboEditor</strong> : allows to set the value of a number
scalar attribute by selecting the value in a list of predefined
possible values. The possible values are formatted according to the
“format” attribute property and the unit property is displayed with
these values. If a list of predefined possible values are defined for
the attribute the ScalarListViewer will automatically use this
component instead of the default one (NumberScalarWheelEditor) to set
the attribute.</li>
</ol>
<p>The figure below shows the screen shots of the viewers.</p>
<p><a class="reference internal" href="../../_images/image7.jpeg"><img alt="image3" src="../../_images/image7.jpeg" style="width: 4.15486in; height: 2.15486in;" /></a></p>
<p>The figure below shows the screen shots for the “setter” classes.</p>
<p><a class="reference internal" href="../../_images/image8.jpeg"><img alt="image4" src="../../_images/image8.jpeg" style="width: 4.58958in; height: 2.16042in;" /></a></p>
</div>
<div class="section" id="stringscalar-attributes">
<h5>StringScalar attributes<a class="headerlink" href="#stringscalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>By string scalar attribute we mean any Tango Attribute whose format is
“Scalar” and whose data type is DevString.</p>
<ol class="arabic simple">
<li>The <strong>SimpleScalarViewer</strong> is used to display the value of a
string scalar attribute. This viewer is the one used by
ScalarListViewer to display the read value of a string scalar
attribute.</li>
<li><strong>StringScalarEditor</strong> : displays the set value of a StringScalar
and the user can type inside the text field to set the value of the
StringScalar attribute. This component is the default component used
for setting a StringScalar attribute in ScalarListViewer.</li>
<li><strong>StringScalarComboEditor</strong> : allows to set the value of a
StringScalar attribute by selecting the value in a list of predefined
possible values. If a list of predefined possible values are defined
for the attribute the ScalarListViewer will automatically use this
component instead of the default one (StringScalarEditor) to set the
attribute.</li>
</ol>
<p>The figure below shows the screen shots for the “viewer” and “setter”
components provided for StringScalar attributes.</p>
<p><a class="reference internal" href="../../_images/image9.jpeg"><img alt="image5" src="../../_images/image9.jpeg" style="width: 4.35139in; height: 2.12500in;" /></a></p>
</div>
<div class="section" id="booleanscalar-attributes">
<h5>BooleanScalar attributes<a class="headerlink" href="#booleanscalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>By boolean scalar attribute we mean any Tango Attribute whose format is
“Scalar” and whose data type is DevBoolean.</p>
<ol class="arabic simple">
<li><strong>BooleanScalarCheckBoxViewer</strong> is used to view and to set the
value of a boolean scalar attribute. In fact the
BooleanScalarCheckBoxViewer is a mixed component. It’s a viewer and a
setter. This component is used in ScalarListViewer to display the the
read value of the Boolean attributes.</li>
<li><strong>SignalScalarLightViewer</strong> is used to display the read value of
a Boolean Scalar attribute.</li>
<li><strong>BooleanScalarComboEditor</strong> : this component is the default
component used in ScalarListViewer to set a boolean attribute. This
component refreshes it’s view according to the change in the
“setpoint” value of the boolean attribute.</li>
<li><strong>SignalScalarButtonSetter</strong> : this component is a pushbutton
which is used to set the value of a boolean attribute always to the
same value. The value (true or false) which is sent to the attribute
at each click on the pushbutton is defined when the component is
instantiated.</li>
</ol>
<p><a class="reference internal" href="../../_images/image10.jpeg"><img alt="image6" src="../../_images/image10.jpeg" style="width: 5.56528in; height: 1.27361in;" /></a></p>
<p><a class="reference internal" href="../../_images/image11.jpeg"><img alt="image7" src="../../_images/image11.jpeg" style="width: 6.63681in; height: 2.38125in;" /></a></p>
</div>
<div class="section" id="enumscalar-attributes">
<h5>EnumScalar attributes<a class="headerlink" href="#enumscalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>The Enumerated attributes will be available within the future releases
of Tango but for the time being, Tango does not provide such a feature.</p>
<p>Nevertheless under some conditions ATK provides the possiblity to see
some numeric and scalar attributes as enumerated attributes.</p>
<p>The condition for mumeric scalar attributes to be considered as
enumerated scalar attributes (EnumScalar) is :</p>
<ul class="simple">
<li>The attribute data type should be <em>DevShort</em>.</li>
<li>A property whose name is ” <em>EnumLabels</em> should be defined for the
attribute.</li>
<li>Eventually (it is optionnal) another property whose name is
U <em>EnumSetExclusion</em> U can also be defined for the attribute</li>
</ul>
<p>The first property (<em>EnumLabels</em> U) specifies the list of all the
possible values the attribute can have. This list is an ordered list.
Each label in the list correponds to a numeric value. The first label is
always associated to zero (0).</p>
<p>The second property (<em>EnumSetExclusion</em>) if specified, gives the list of
labels, which can never be used to set the attribute. The labels
specified by this property are possible values the attribute can have
when we read it but they can not be used as possible set values. If this
property is not specified, all the values / labels specified in
U <em>EnumLabels</em> U, can be used to set the attribute value.</p>
<p>In the screen shot below, you can see how a DevShort scalar attribute
(<em>jlp/test/1/att_six</em>) can be configured using JIVE such that ATK
considers it as an enumerated attribute :</p>
<p><a class="reference internal" href="../../_images/image12.jpeg"><img alt="image8" src="../../_images/image12.jpeg" style="width: 6.29167in; height: 3.87500in;" /></a></p>
<p>In this example the possible values for <em>jlp/test/1/att_six</em> are 0, 1, 2,
and 3 respectively associated to “first val”, “second one”, “third” and
“last”. Note that the value “third”=2 can be read from the attribute but
can never be used to set the attribute.</p>
<p>The <strong>SimpleEnumScalarViewer</strong> is used to display the read value of
a enumerated scalar attribute. This component is used by the
ScalarListViewer to view the enumerated attributes. <strong>Do not forget that
enumerated attribute is an ATK concept and in Tango the real type of the
attribute is DevShort.</strong></p>
<p>The <strong>SimpleEnumScalarViewer</strong> reads the value of the attribute and
displays the “label” corresponding to the read value. This label is one
of those specified by the property U <em>EnumLabels</em> U associated to the
attribute.</p>
<p>The <strong>EnumScalarComboEditor</strong> is used to set an EnumScalar
attribute. This component is used by ScalarListViewer to set the
enumerated attributes. This component displays the setPoint value of the
attribute converting it to a label specified by the attribute property
<em>UEnumLabelsU</em>. In the comboBox drop down list all the labels specified
by <em>EnumLabels</em> property are displayed, excepted those defined in
<em>UEnumSetExclusionU</em> property.</p>
<p><a class="reference internal" href="../../_images/image13.jpeg"><img alt="image9" src="../../_images/image13.jpeg" style="width: 4.89861in; height: 1.29167in;" /></a></p>
<p>The picture above shows at the left side a SimpleEnumScalarViewer and at
the right side an <strong>EnumScalarComboEditor</strong> both associated with the
same attribute <em>jlp/test/1/att_six</em>. As you can see the label “third” is
not proposed in the comboBox drop down list for setting since this label
is included in the U <em>EnumSetExclusion</em> U property. But if this value
(numerical value = 2) is read on the attribute the
SimpleEnumScalarViewer on the left side will display “third”.</p>
</div>
<div class="section" id="devstate-scalar-attributes">
<h5>DevState Scalar attributes<a class="headerlink" href="#devstate-scalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>By DevState scalar attribute we mean any Tango attribute whose format is
“Scalar” and whose data type is DevState. The
“ <a class="reference external" href="#device-state-and-device-status">StateViewer</a> ” is one of the
viewers used to view a DevState scalar attribute. The state is converted
to a color by the ATK state viewers. The following color – state
correpondance is used by all the ATK viewers:</p>
<table border="1" class="docutils">
<colgroup>
<col width="61%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>State</strong></th>
<th class="head"><strong>Colour</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ON, OPEN, EXTRACT</td>
<td>Green</td>
</tr>
<tr class="row-odd"><td>OFF, CLOSE, INSERT</td>
<td>White</td>
</tr>
<tr class="row-even"><td>MOVING, RUNNING</td>
<td>Light Blue</td>
</tr>
<tr class="row-odd"><td>STANDBY</td>
<td>Yellow</td>
</tr>
<tr class="row-even"><td>FAULT</td>
<td>Red</td>
</tr>
<tr class="row-odd"><td>INIT</td>
<td>Beige</td>
</tr>
<tr class="row-even"><td>ALARM</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>DISABLE</td>
<td>Magenta</td>
</tr>
<tr class="row-even"><td>UNKNOWN</td>
<td>Grey</td>
</tr>
</tbody>
</table>
<p>As you can see in the table above the <strong>Open</strong> and <strong>Extract</strong> states
are represented by the <strong>green</strong> color. Green color represents a normal
operational state. But the <strong>Close</strong> and <strong>Insert</strong> states are
represented by the <strong>white</strong> color which means abnormal operational
state. In practice, in some cases the green color should be associated
to “Close” instead of Open, because close state is the normal
operational state of a particular device. The inversion of the colors
can also be acceptable for Extract and Insert states in some cases.</p>
<p><em>ATK allows to invert the color correspondance</em> only for “Open” and
“Close” states and for “Extract” and “Insert” states.</p>
<p>To invert the color correspondance for “Open” and “Close” states <em>the
attribute property</em> <strong>OpenCloseInverted</strong> should be set to <strong>True</strong>.</p>
<p>To invert the color correspondance for “Extract” and “Insert” states
<em>the attribute property</em> <strong>InsertExtractInverted</strong> should be set to
<strong>True</strong>.</p>
<ol class="arabic simple">
<li><strong>StateViewer</strong> is used to view the read value of a DevState
Scalar attribute. The state is represented as a colored rectangle
besides the name or the alias of the Tango Device.</li>
</ol>
<p><a class="reference internal" href="../../_images/image14.jpeg"><img alt="image10" src="../../_images/image14.jpeg" style="width: 6.29792in; height: 0.51806in;" /></a></p>
<p>ATK does not provide any component for setting a DevStateScalar
attribute.</p>
</div>
</div>
<div class="section" id="a-collection-of-scalar-attributes">
<h4>A Collection of scalar attributes<a class="headerlink" href="#a-collection-of-scalar-attributes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="attributelist-viewers">
<h5>AttributeList viewers<a class="headerlink" href="#attributelist-viewers" title="Permalink to this headline">¶</a></h5>
<p>As we have already studied them the attribute list viewers are the
components which use an attribute list as their model (not an individual
attribute). They display only the scalar attributes and ignore the non
scalar attributes contained in the attribute list. They automatically
choose the appropriate viewer depending on the type of the attribute.
ATK proposes 3 attribute list viewers : NumberScalarListViewer,
ScalarListViewer, ScalarListSetter. Please have a look into the section
: <a class="reference external" href="#display-a-list-of-scalar-attributes">View a list of scalar
attributes</a>.</p>
</div>
<div class="section" id="a-set-of-scalar-attributes-in-a-table-multiscalartableviewer">
<h5>A set of scalar attributes in a table (MultiScalarTableViewer)<a class="headerlink" href="#a-set-of-scalar-attributes-in-a-table-multiscalartableviewer" title="Permalink to this headline">¶</a></h5>
<p>The MultiScalarTableViewer is used to view a collection of scalar
attributes inside a table. Each attribute is associated to a cell. The
MultiScalarTableViewer will select the appropriate scalar attribute
viewer according to the type of the attribute (NumberScalar,
StringScalar, BooleanScalar or EnumScalar). The viewer is used inside
the corresponding cell to display the read value of the attribute.</p>
<p>The user can also set the attribute value. To do so, (s)he should double
click inside the cell. This will display a set panel adapted to the type
of the scalar attribute. A double click on a read-only attribute has no
effect.</p>
<p>If the keyboard focus is on the table, when the mouse enters a cell a
tooltip will display the precise tango name of the attribute.</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/MultiScalarTableViewer.htm">Using the ATK MultiScalarTableViewer (Flash
demo)</a></p>
</div>
<div class="section" id="a-set-of-devstatescalar-attributes-tabbedpanedevstatescalarviewer">
<h5>A set of DevStateScalar attributes (TabbedPaneDevStateScalarViewer)<a class="headerlink" href="#a-set-of-devstatescalar-attributes-tabbedpanedevstatescalarviewer" title="Permalink to this headline">¶</a></h5>
<p>The TabbedPaneDevStateScalarViewer is used to view a collection of state
attributes in the titles of the panes of a tabbedPane. Each state
attribute is added to the viewer by the call to
<em>addDevStateScalarModel</em>. This method needs also the index of the tab to
be associated to the state attribute. The screen shot below shows this
viewer :</p>
<p><a class="reference internal" href="../../_images/image15.jpeg"><img alt="image11" src="../../_images/image15.jpeg" style="width: 6.30347in; height: 1.65486in;" /></a></p>
</div>
</div>
<div class="section" id="trend-of-scalar-attributes">
<h4>Trend of Scalar attributes<a class="headerlink" href="#trend-of-scalar-attributes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="the-trend-of-number-scalar-attributes">
<h5>The trend of number scalar attributes<a class="headerlink" href="#the-trend-of-number-scalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>The ATK component <em>Trend</em> allows the user to follow the evolution of the
value of one or more number scalar attributes during the time. Trend
accepts an attribute list as model. The number scalar members of the
attributeList can be plotted inside a chart during the time. Each
NumberScalar attribute included in the attribute list will be read at
the frequency of the refresh period and displayed as a separated plot.</p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/TrendDemo.htm">Using the ATK Trend (Flash
demo)</a></p>
</div>
<div class="section" id="the-trend-of-boolean-scalar-attributes">
<h5>The trend of boolean scalar attributes<a class="headerlink" href="#the-trend-of-boolean-scalar-attributes" title="Permalink to this headline">¶</a></h5>
<p>The ATK component <em>BooleanTrend</em> allows the user to follow the evolution
of the value of one or more boolean scalar attributes during the time.
BooleanTrend accepts an attribute list as model. The boolean scalar
members of the attributeList can be plotted inside a chart during the
time. Each BooleanScalar attribute included in the attribute list will
be read at the frequency of the refresh period and displayed as a
separated plot.</p>
<p><a class="reference internal" href="../../_images/image16.jpeg"><img alt="image12" src="../../_images/image16.jpeg" style="width: 6.13681in; height: 3.11319in;" /></a></p>
</div>
</div>
</div>
<div class="section" id="spectrum-attributes">
<h3>Spectrum attributes<a class="headerlink" href="#spectrum-attributes" title="Permalink to this headline">¶</a></h3>
<p>A spectrum attribute is a Tango attribute whose format is Spectrum (one
dimensional array) whatever the data type of the attribute. In this
chapter we will see how to view and / or to set a single spectrum
attribute. We will also see how to view a collection of spectrum
attributes.</p>
<div class="section" id="one-single-spectrum-attribute">
<h4>One single spectrum attribute<a class="headerlink" href="#one-single-spectrum-attribute" title="Permalink to this headline">¶</a></h4>
<div class="section" id="numberspectrum-attributes">
<h5>NumberSpectrum attributes<a class="headerlink" href="#numberspectrum-attributes" title="Permalink to this headline">¶</a></h5>
<p>By number spectrum attribute we mean any Tango Attribute whose format is
“Spectrum” and whose data type is one of the numerical types. No matter
if it’s a DevLong, DevDouble , or whatever numerical type.</p>
<p>The <strong>NumberSpectrumViewer</strong> is used to display the read value of a
number spectrum attribute. This viewer displays the spectrum attribute
as a plot in a chart. The user can display the values inside the
spectrum in a table using the mouse right button menus. You can use this
viewer following the code sample below:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>AttributeList attl = new AttributeList;
Try
{
    INumberSpectrum spect = (InumberSpectrum) attl.add(“my/test/device/onespectrumatt”);
    NumberSpectrumViewer nsv = new NumberSpectrumViewer();
    nsv.setModel(spect);
}
catch ()
{

}
</pre></div>
</td></tr></table></div>
<p>The following screen shot shows a <strong>numberSpectrumViewer</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The table on the right, has been displayed using the chart menus
under the right mouse button.</p>
</div>
<p><a class="reference internal" href="../../_images/image17.jpeg"><img alt="image13" src="../../_images/image17.jpeg" style="width: 6.29167in; height: 4.18472in;" /></a></p>
<p><em>ATK does not provide any component for setting a NumberSpectrum
attribute.</em></p>
</div>
<div class="section" id="stringspectrum-attributes">
<h5>StringSpectrum attributes<a class="headerlink" href="#stringspectrum-attributes" title="Permalink to this headline">¶</a></h5>
<p>By string spectrum attribute we mean any Tango Attribute whose format is
“Spectrum” and whose data type is DevString.</p>
<p>The <strong>SimpleStringSpectrumViewer</strong> is used to display the value of a
StringSpectrum attribute. The <strong>SimpleStringSpectrumViewer</strong>
displays the spectrum attribute as a scrolled text. Each string element
of the spectrum is displayed in a new line. The code sample is very
similar to the one given in the previous section for the use of
NumberSpectrumViewer. You just need to replace NumberSpectrumViewer by
SimpleStringSpectrumViewer and replace INumberSpectrum by
IStringSpectrum.</p>
<p><a class="reference internal" href="../../_images/image18.jpeg"><img alt="image14" src="../../_images/image18.jpeg" style="width: 3.29167in; height: 1.70208in;" /></a></p>
</div>
<div class="section" id="devstatespectrum-attributes">
<h5>DevStateSpectrum attributes<a class="headerlink" href="#devstatespectrum-attributes" title="Permalink to this headline">¶</a></h5>
<p>By DevState spectrum attribute we mean any Tango Attribute whose format
is “Spectrum” and whose data type is DevState.</p>
<p>The <strong>DevStateSpectrumViewer</strong> is used to display the value of a
DevState Spectrum attribute. This viewer displays the elements of the
state spectrum attribute vertically. Each elements is displayed in a
line with three different areas: in the left a text label is displayed
with the name of the attribute and the index of the element in the
spectrum, in the middle a colored rectangle displays the state value and
in the right side a text label displays the state value converted to a
string.</p>
<p><a class="reference internal" href="../../_images/image19.jpeg"><img alt="image15" src="../../_images/image19.jpeg" style="width: 6.44028in; height: 5.50000in;" /></a></p>
<p>The label displayed on the left side of each element can be customized.
By default this lable is the attribute name + [ + index + ]. To define
another label for the spectrum elements the tango attribute property
<strong>StateLabels</strong> should be defined. In the example above, this attribute
property has been defined using JIVE :</p>
<p><a class="reference internal" href="../../_images/image20.jpeg"><img alt="image16" src="../../_images/image20.jpeg" style="width: 6.94653in; height: 3.67847in;" /></a></p>
</div>
</div>
<div class="section" id="a-collection-of-spectrum-attributes">
<h4>A collection of Spectrum attributes<a class="headerlink" href="#a-collection-of-spectrum-attributes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="a-set-of-numberspectrum-attributes-in-one-single-chart">
<h5>A set of NumberSpectrum attributes in one single chart<a class="headerlink" href="#a-set-of-numberspectrum-attributes-in-one-single-chart" title="Permalink to this headline">¶</a></h5>
<p>The MultiNumberSpectrumViewer is used to view a collection of number
spectrum attributes inside a chart. Each number spectrum attribute is
displayed as an individual plot. All plots are displayed inside the
same.</p>
<p>The following code example uses the MultiNumberSpectrumViewer to view 2
NumberSpectrum attributes: “<em>jlp/test/1/att_spectrum</em>”,
“<em>jlp/test/2/att_spectrum</em>”.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span>INumberSpectrum ins;
AttributeList attl = new AttributeList();
MultiNumberSpectrumViewer mnsv = new MultiNumberSpectrumViewer();
Try{
    ins = (INumberSpectrum) attl.add(&quot;jlp/test/1/att_spectrum&quot;);
    mnsv.addNumberSpectrumModel(ins);
    ins = (INumberSpectrum) attl.add(&quot;jlp/test/2/att_spectrum&quot;);
    mnsv.addNumberSpectrumModel(ins);

…. You can continue adding other spectrum attributes

}catch (Exception ex)
{
    System.out.println(&quot;Cannot connect device&quot;);
    ex.printStackTrace();
}
</pre></div>
</td></tr></table></div>
<p>The following screen shot shows the result of the execution of this code
example:</p>
<p><a class="reference internal" href="../../_images/image21.jpeg"><img alt="image17" src="../../_images/image21.jpeg" style="width: 5.90486in; height: 2.17847in;" /></a></p>
<p>As you can see, this viewer associates each attribute plot to a colour
in the order the attributes have been added by the call to
“addNumberSpectrumModel” method. The user has the possibility to change
the visual aspects (colour, line width, affine transform, marker, …etc.)
of each plot.</p>
</div>
</div>
<div class="section" id="trend-of-spectrum-attributes">
<h4>Trend of Spectrum attributes<a class="headerlink" href="#trend-of-spectrum-attributes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="the-trend-of-number-spectrum-attributes">
<h5>The trend of number spectrum attributes<a class="headerlink" href="#the-trend-of-number-spectrum-attributes" title="Permalink to this headline">¶</a></h5>
<p>There are two ATK viewers which allow the user to follow the evolution
of the values of the array elements of a NumberSpectrum attribute.</p>
<ol class="arabic simple">
<li><strong>NumberSpectrumTrendViewer</strong>,</li>
<li><strong>NumberSpectrumItemTrend</strong>.</li>
</ol>
<p>The first component (NumberSpectrumTrendViewer) will display and follows
the evolution of <strong>ALL</strong> elements of the spectrum.</p>
<p>The second component (NumberSpectrumItemTrend) is more flexible. It can
display the trend of all elements of the spectrum as the first one does.
But you can also specify which elements (items) of the spectrum you want
to see in the trend.</p>
<p>The following code sample illustrates the use of the <strong>NumberSpectrumItemTrend</strong>.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">NumberSpectrumItemTrend</span> <span class="n">nsit</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NumberSpectrumItemTrend</span><span class="o">();</span>
 <span class="k">try</span>
 <span class="o">{</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="o">(</span><span class="n">INumberSpectrum</span><span class="o">)</span> <span class="n">attList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;fp/test/1/wave&quot;</span><span class="o">);</span>
    <span class="n">nsit</span><span class="o">.</span><span class="na">setPlotAll</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="n">nsit</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">ins</span><span class="o">);</span>
    <span class="n">nsit</span><span class="o">.</span><span class="na">plotItem</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="n">NumberSpectrumItemTrend</span><span class="o">.</span><span class="na">AXIS_Y1</span><span class="o">,</span> <span class="s">&quot;wave[30]&quot;</span><span class="o">);</span>
    <span class="n">nsit</span><span class="o">.</span><span class="na">plotItem</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">NumberSpectrumItemTrend</span><span class="o">.</span><span class="na">AXIS_Y1</span><span class="o">,</span> <span class="s">&quot;wave[1]&quot;</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
 <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;caught exception : &quot;</span><span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
 <span class="o">}</span>
     <span class="n">mainFrame</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JFrame</span><span class="o">();</span>
     <span class="n">mainFrame</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="n">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
     <span class="n">mainFrame</span><span class="o">.</span><span class="na">getContentPane</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">nsit</span><span class="o">);</span>

 <span class="n">attList</span><span class="o">.</span><span class="na">startRefresher</span><span class="o">();</span>
 <span class="n">mainFrame</span><span class="o">.</span><span class="na">setSize</span><span class="o">(</span><span class="mi">800</span><span class="o">,</span><span class="mi">600</span><span class="o">);</span>
 <span class="n">mainFrame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
 <span class="n">mainFrame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

 <span class="c1">// Test hide and show item!</span>
 <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
 <span class="o">{</span>
     <span class="k">try</span>
     <span class="o">{</span>
         <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
     <span class="o">}</span>
     <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
     <span class="o">{</span>

     <span class="o">}</span>
     <span class="n">nsit</span><span class="o">.</span><span class="na">hideItem</span><span class="o">(</span><span class="mi">7</span><span class="o">);</span>
     <span class="k">try</span>
     <span class="o">{</span>
         <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
     <span class="o">}</span>
     <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
     <span class="o">{</span>

     <span class="o">}</span>
     <span class="n">nsit</span><span class="o">.</span><span class="na">showItem</span><span class="o">(</span><span class="mi">7</span><span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
<span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">StringImageTableViewer</span> <span class="n">sitv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringImageTableViewer</span><span class="o">();</span>
<span class="n">Try</span>
<span class="o">{</span>
   <span class="n">isi</span> <span class="o">=</span> <span class="o">(</span><span class="n">IStringImage</span><span class="o">)</span> <span class="n">attl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;my/test/dev/att_str_image&quot;</span><span class="o">);</span>
   <span class="n">sitv</span><span class="o">.</span><span class="na">setAttModel</span><span class="o">(</span><span class="n">isi</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
<span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cannot connect device&quot;</span><span class="o">);</span>
    <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>The screenShot below show the NumberSpectrumItemTrend used for only two
elements (index 1 and index 30) of a numberSpectrum attribute :</p>
<p><a class="reference internal" href="../../_images/image22.jpeg"><img alt="image18" src="../../_images/image22.jpeg" style="width: 5.47639in; height: 3.85139in;" /></a></p>
</div>
</div>
</div>
<div class="section" id="image-attributes">
<h3>Image attributes<a class="headerlink" href="#image-attributes" title="Permalink to this headline">¶</a></h3>
<p>An image attribute is a Tango attribute whose format is Image (2
dimensional array) whatever the data type of the attribute. In this
chapter we will see how to view and / or set a single image attribute.</p>
<div class="section" id="one-single-image-attribute">
<h4>One single image attribute<a class="headerlink" href="#one-single-image-attribute" title="Permalink to this headline">¶</a></h4>
<div class="section" id="numberimage-attributes">
<h5>NumberImage attributes<a class="headerlink" href="#numberimage-attributes" title="Permalink to this headline">¶</a></h5>
<p>By number image attribute we mean any Tango Attribute whose format is
“Image” (2 dimensional array) and whose data type is one of the
numerical types. No matter if it’s a DevLong, DevDouble , or whatever
numerical type. All the attributes which are not a video image such as a
2 dimensional array of numeric data, are considered to be NumberImage
attributes.</p>
<p>The <strong>NumberImageViewer</strong> is used to display the value of a 2
dimensional array of numeric data (not a video image). The following
code sample illustrates the use of the NumberImageViewer.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">INumberImage</span> <span class="n">ini</span><span class="o">;</span>
<span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">NumberImageViewer</span> <span class="n">niv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NumberImageViewer</span><span class="o">();</span>
<span class="n">Try</span>
<span class="o">{</span>
    <span class="n">ini</span> <span class="o">=</span> <span class="o">(</span><span class="n">INumberImage</span><span class="o">)</span> <span class="n">attl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;jlp/test/1/att_image&quot;</span><span class="o">);</span>
    <span class="n">niv</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">ini</span><span class="o">);</span>
<span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cannot connect device&quot;</span><span class="o">);</span>
        <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>The following screen shot shows the result of the execution of the code
sample above :</p>
<p><a class="reference internal" href="../../_images/image23.jpeg"><img alt="image19" src="../../_images/image23.jpeg" style="width: 6.29792in; height: 5.32153in;" /></a></p>
<p><em>ATK does not provide any component for setting a NumberImage attribute.</em></p>
</div>
<div class="section" id="rawimage-attributes">
<h5>RawImage attributes<a class="headerlink" href="#rawimage-attributes" title="Permalink to this headline">¶</a></h5>
<p>RawImage attributes are used for the images coming from video camera,
CCDs. By convention the Raw Image data (image coming from video camera,
CCDs) should be sent as attributes with format = image and data type =
DevUchar. The RawImage feature is not available for the moment in the
standard ATK. We are waiting for a tango definition of CCD / vidéo
camera images with different formats (jpeg, png, …) in order to
implement RawImages in standard ATK. The ATK RawImage viewer will be
supported when the attribute data type “DevEncoded” will be available in
Tango API.</p>
<p><em>ATK does not provide any component for setting a RawImage attribute</em> .</p>
</div>
<div class="section" id="stringimage-attributes">
<h5>StringImage attributes<a class="headerlink" href="#stringimage-attributes" title="Permalink to this headline">¶</a></h5>
<p>By string image attribute we mean any Tango Attribute whose format is
“Image” (2 dimensional array) and whose data type is DevString.</p>
<p>The <strong>StringImageTableViewer</strong> is used to view a StringImage
attribute (a 2 dimensional array of string). Each element of the
attribute array will be displayed in a cell in a swing JTable.</p>
<p>The following code sample illustrates the use of the <strong>StringImageTableViewer</strong>.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">IStringImage</span> <span class="n">isi</span><span class="o">;</span>
<span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">StringImageTableViewer</span> <span class="n">sitv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringImageTableViewer</span><span class="o">();</span>
<span class="n">Try</span>
<span class="o">{</span>
    <span class="n">isi</span> <span class="o">=</span> <span class="o">(</span><span class="n">IStringImage</span><span class="o">)</span> <span class="n">attl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;my/test/dev/att_str_image&quot;</span><span class="o">);</span>
    <span class="n">sitv</span><span class="o">.</span><span class="na">setAttModel</span><span class="o">(</span><span class="n">isi</span><span class="o">);</span>
<span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cannot connect device&quot;</span><span class="o">);</span>
        <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p><em>ATK does not provide any component for setting a StringImage attribute.</em></p>
</div>
</div>
</div>
<div class="section" id="device-commands">
<h3>Device Commands<a class="headerlink" href="#device-commands" title="Permalink to this headline">¶</a></h3>
<div class="section" id="display-a-single-tango-device-command">
<h4>Display a single tango device command<a class="headerlink" href="#display-a-single-tango-device-command" title="Permalink to this headline">¶</a></h4>
<p>There are several viewers available to represent a Tango device command.
The choice of the viewer depends on the type of the input and output
argument of the command. For example the <strong>VoidVoidCommandViewer</strong>
is used for all commands with no input argument and no output argument.</p>
<div class="section" id="commands-with-no-input-and-no-output-argument-voidvoidcommand">
<h5>Commands with no input and no output argument (VoidVoidCommand)<a class="headerlink" href="#commands-with-no-input-and-no-output-argument-voidvoidcommand" title="Permalink to this headline">¶</a></h5>
<p>The commands with no input and no output argument are called VoidVoid
commands in ATK. The following list presents all the command viewers
suitable for VoidVoidCommands:</p>
<ol class="arabic simple">
<li><strong>VoidVoidCommandViewer</strong>: is a sub-classes of swing JButton. The
label of the Jbutton is the name of the command. A click on a
VoidVoidCommandViewer will immediately launch the execution of the
corresponding command on the tango device. When the mouse enters the
button a tooltip will display the name of the tango device on which
the command will be executed.</li>
<li><strong>ConfirmCommandViewer</strong>: is also a sub-classes of swing
JButton.. The difference with previous viewer is that the click on
the ConfirmCommandViewer button will just popup a confirmation dialog
window. The device server’s command is executed only if the user
confirms the dialog window. As for the VoidVoidCommandViewer when the
mouse enters the button a tooltip will display the name of the tango
device on which the command will be executed.</li>
</ol>
<p><a class="reference internal" href="../../_images/image24.jpeg"><img alt="image20" src="../../_images/image24.jpeg" style="width: 6.29792in; height: 2.49375in;" /></a></p>
<p>The code sample below can be used for these two viewers indifferently:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">ICommand</span> <span class="n">ic</span><span class="o">;</span>
<span class="n">CommandList</span> <span class="n">cmdl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommandList</span><span class="o">();</span>
<span class="n">VoidVoidCommandViewer</span> <span class="n">vvcv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VoidVoidCommandViewer</span><span class="o">();</span>
<span class="n">Try</span>
<span class="o">{</span>
    <span class="n">ic</span> <span class="o">=</span> <span class="o">(</span><span class="n">ICommand</span><span class="o">)</span><span class="n">cmdl</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;elin/gun/beam/Off&quot;</span><span class="o">);</span>
    <span class="n">vvcv</span><span class="o">.</span><span class="na">setAttModel</span><span class="o">(</span><span class="n">ic</span><span class="o">);</span>
<span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cannot connect device&quot;</span><span class="o">);</span>
        <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="commands-with-devboolean-input-argument-and-no-output-argument-booleanvoidcommand">
<h5>Commands with DevBoolean input argument and no output argument (BooleanVoidCommand)<a class="headerlink" href="#commands-with-devboolean-input-argument-and-no-output-argument-booleanvoidcommand" title="Permalink to this headline">¶</a></h5>
<p>The commands with DevBoolean input argument and no output argument are
called BooleanVoid commands in ATK. The following list presents all the
command viewers suitable for BooleanVoidCommands:</p>
<ol class="arabic simple">
<li><strong>OnOffCheckBoxCommandViewer</strong>: is a sub-classes of swing
JCheckBox. A click on a OnOffCheckBoxCommandViewer will immediately
execute the corresponding command on the tango device. The value of
the input parameter passed to the device command depends on the state
of the checkBox. If the checkBox is selected the device command is
called with “true” parameter, otherwise the “false” parameter is sent
to the command.</li>
<li><strong>OnOffSwitchCommandViewer</strong>: A click on a
OnOffSwitchCommandViewer will immediately execute the corresponding
command on the tango device. The value of the input parameter passed
to the device command depends on the state of the switch. The
difference with the previous viewer is only in the graphical
representation.</li>
</ol>
<p><a class="reference internal" href="../../_images/image25.jpeg"><img alt="image21" src="../../_images/image25.jpeg" style="width: 6.29792in; height: 2.17292in;" /></a></p>
</div>
<div class="section" id="commands-with-devstring-input-argument-and-no-output-argument">
<h5>Commands with DevString input argument and no output argument<a class="headerlink" href="#commands-with-devstring-input-argument-and-no-output-argument" title="Permalink to this headline">¶</a></h5>
<p>The following list presents all the command viewers suitable for the
commands with DevString input argument and no output argument.</p>
<ol class="arabic simple">
<li><strong>OptionComboCommandViewer</strong>: is a sub-class of Swing JCombobox.
The limited possibilities for the input strings are displayed in the
combobox drop down list. A click in this list will launch the
execution of the Tango device command with the input parameter equal
to the item selected in the combobox item list.</li>
</ol>
</div>
<div class="section" id="commands-with-any-type-of-input-argument-and-any-type-of-output-argument">
<h5>Commands with any type of input argument and any type of output argument<a class="headerlink" href="#commands-with-any-type-of-input-argument-and-any-type-of-output-argument" title="Permalink to this headline">¶</a></h5>
<p>The following list presents all the command viewers suitable “any” tango
command</p>
<ol class="arabic simple">
<li><strong>AnyCommandViewer</strong>: is a sub-class of Swing JButton. This
viewer is convenient for the tango device commands with input
arguments and / or output arguments of <strong>any type</strong>. A click on the
button will display a window (see the screen shot below) in which the
user can enter the input argument, click on execute will execute the
command with the specified input argument and if there is any output
argument, it will be displayed in the lower area (scrolled text area)
of this window.</li>
</ol>
<p><a class="reference internal" href="../../_images/image26.jpeg"><img alt="image22" src="../../_images/image26.jpeg" style="width: 4.83333in; height: 2.92847in;" /></a></p>
</div>
</div>
<div class="section" id="display-a-collection-of-tango-device-commands">
<h4>Display a collection of tango device commands<a class="headerlink" href="#display-a-collection-of-tango-device-commands" title="Permalink to this headline">¶</a></h4>
<p>ATK provides a viewer <strong>CommandComboViewer</strong> to display a collection
of device commands in a Combo drop down list. Each element of this list
acts as a “VoidVoid CommandViewer” if the command has no input and no
output argument. The command list element acts as “AnyCommandViewer” if
the command has an input and / or output argument.</p>
<p><a class="reference internal" href="../../_images/image27.jpeg"><img alt="image23" src="../../_images/image27.jpeg" style="width: 1.37500in; height: 2.07153in;" /></a></p>
<p>The model for this viewer is a CommadList. All the members of the
commandList will be displayed in the comboBox drop down list no matter
what is the type of their input and / or output arguments.</p>
<p>When one of the iterms of the list is selected :</p>
<ul class="simple">
<li>If the command has no input argument it is immediately executed.</li>
<li>If the command needs an input argument a “anyCommandViewer” window
will be displayed asking for the argument to be entered.</li>
</ul>
</div>
</div>
<div class="section" id="error-handling">
<h3>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h3>
<p>All the exceptions thrown by Tango and caught by ATK are transformed
into an ATK error event. Below is a list of some situations in which the
exceptions are caught by ATK and tranformed into an ATK error event :</p>
<ul class="simple">
<li>Tango device access timeout during the refreshing of the attributes,</li>
<li>Tango device access timeout during the actions like : setting the
value of an attribute, execution of a command,</li>
<li>Exceptions thrown by the device servers because of a non authorized
action or value setting.</li>
</ul>
<p>What is important to note is that normally all the exceptions thrown by
the Tango API are caught inside ATK and transformed into error events.
The only exception, which is not transformed to an ATK error, is the
ConnectionException. This exception is thrown by ATK if and only if the
initial connection to the tango device fails. So apart from the
ConnectionException the ATK application programmer does not need to
catch any tango related exception.</p>
<p><a class="reference internal" href="../../_images/image28.jpeg"><img alt="image24" src="../../_images/image28.jpeg" style="width: 3.06528in; height: 5.72639in;" /></a></p>
<p>There are two kinds of errors in ATK. The first type of errors, called
<strong>“Error”</strong>, is produced when the Tango DevFailed Exception occurs
during the <em>reading</em> of an attribute or during the <em>execution</em> of a
command. The second type of errors, called <strong>“SetError”</strong>, is
produced when the Tango DevFailed Exception occurs during the <em>setting</em>
value of an attribute. This is done to be able to make a clear
separation between the errors which happen during the setting of an
attribute and those which happen during the reading of the same
attribute.</p>
<p>In addition to the ATK error events generated, ATK provides two classes
of error viewers : <strong>ErrorHistory</strong> and <strong>ErrorPopup</strong>. They are the
graphical viewer classes which listen to ATK error events and display
the error to the application end user.</p>
<div class="section" id="how-to-handle-and-display-errors">
<h4>How to handle and display errors<a class="headerlink" href="#how-to-handle-and-display-errors" title="Permalink to this headline">¶</a></h4>
<p>The provided error viewer classes can be used to collect and to display
ATK errors generated during the application session. Here are the steps
to perform to handle errors :</p>
<ul>
<li><p class="first">Create one or more ErrorViewer(s):</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">ErrorHistory</span> <span class="n">errh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ErrorHistory</span><span class="o">();</span>
<span class="n">ErrorPopup</span> <span class="n">errorpopup</span> <span class="o">=</span> <span class="n">ErrorPopup</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Add one or more error viewer(s) as error listeners to the empty
attribute list just after it’s instantiation:</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addErrorListener</span><span class="o">(</span><span class="n">errh</span><span class="o">);</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addSetErrorListener</span><span class="o">(</span><span class="n">errorpopup</span><span class="o">);</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addSetErrorListener</span><span class="o">(</span><span class="n">errh</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Add one or more error viewer(s) as error listeners to the empty
command list just after it’s instantiation:</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">CommandList</span> <span class="n">cmdl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommandList</span><span class="o">();</span>
<span class="n">cmdl</span><span class="o">.</span><span class="na">addErrorListener</span><span class="o">(</span><span class="n">errh</span><span class="o">);</span>
<span class="n">cmdl</span><span class="o">.</span> <span class="nf">addErrorListener</span><span class="o">(</span><span class="n">errorpopup</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Connect to the attributes by adding them to the attribute list:</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>attl.add(att_one);
attl.add(att_two);
…..
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Connect to the commands by adding them to the command list:</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>cmdl.add(cmd_one);
cmdll.add(cmt_two);
…..
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
<li><p class="first">Start the attribute list refresher:</p>
<blockquote>
<div><div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>attl.startRefresher();
…..
</pre></div>
</td></tr></table></div>
</div></blockquote>
</li>
</ul>
<p>The error viewers are registered as error listeners of the attribute
list and the command list. This way they will be registered as the error
listeners of all the members added to these lists. It is very important
to <em>register them as error listeners of the list before the first
adding</em> of the elements.</p>
</div>
<div class="section" id="error-viewers">
<h4>Error Viewers<a class="headerlink" href="#error-viewers" title="Permalink to this headline">¶</a></h4>
<p>There are two error viewer classes provided by ATK : <strong>ErrorHistory</strong>
and <strong>ErrorPopup</strong>. To use them the application programmer should add
them as error listeners to either attribute and command lists or to the
attribute and command entities directly.</p>
<div class="section" id="errorhistory">
<h5>ErrorHistory<a class="headerlink" href="#errorhistory" title="Permalink to this headline">¶</a></h5>
<p>The ErrorHistory viewer is used to log all of the errors it receives and
keep the history of all the errors received. It will display the list of
these errors. If the same error occurs repeatedly, to save place in the
window, only the timestamp of the error is changed. This way only the
date and the time of the last time the error occurred is displayed.</p>
<p>The code sample below shows how to use ErrorHistory :</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">ErrorHistory</span> <span class="n">eh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ErrorHistory</span><span class="o">();</span>
<span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addErrorListener</span><span class="o">(</span><span class="n">eh</span><span class="o">);</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addSetErrorListener</span><span class="o">(</span><span class="n">eh</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
<p>The call to <strong>“addErrorListener”</strong> will add the ErrorHistory as a
listener for all errors excepted those happening during the attribute
set value. If we want to log into the ErrorHistory the attribute setting
errors we should call the <strong>“addSetErrrorListener”</strong> in addition to
<strong>“addErrorListener”</strong>.</p>
<p><a class="reference internal" href="../../_images/image29.jpeg"><img alt="image25" src="../../_images/image29.jpeg" style="width: 6.29167in; height: 3.29792in;" /></a></p>
<p>A right click on one of the errors displayed in the list, will display
detailed information about that particular error. “Show Error” will
display on the right panel the Tango error stack.</p>
</div>
<div class="section" id="errorpopup">
<h5>ErrorPopup<a class="headerlink" href="#errorpopup" title="Permalink to this headline">¶</a></h5>
<p>The ErrorPopup viewer is a singleton class in ATK. This viewer is a
dialog window which pops up as soon as it receives an error. The error
description is displayed and the user can get the detailed description
of the error. The ErrorPopup window waits for the user click to
disappear.</p>
<p>Normally the ErrorPopup should NOT be used for the errors which occur
during the attribute refreshing. It should be used for errors which
occur rarely like the setting of an attribute or the execution of a
command.</p>
<p>The code sample below shows how to use ErrorPopup:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">ErrorPopup</span> <span class="n">errpp</span> <span class="o">=</span> <span class="n">ErrorPopup</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">AttributeList</span> <span class="n">attl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AttributeList</span><span class="o">();</span>
<span class="n">CommandList</span> <span class="n">cmdl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommandList</span><span class="o">();</span>
<span class="n">attl</span><span class="o">.</span><span class="na">addSetErrorListener</span><span class="o">(</span><span class="n">errpp</span><span class="o">);</span>
<span class="n">cmdl</span><span class="o">.</span><span class="na">addErrorListener</span><span class="o">(</span><span class="n">errpp</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The ErrorPopup is only added as “SetErrorListener” to the
attribute list.</p>
</div>
<p><a class="reference internal" href="../../_images/image30.jpeg"><img alt="image26" src="../../_images/image30.jpeg" style="width: 3.14861in; height: 1.26181in;" /></a></p>
</div>
</div>
</div>
<div class="section" id="synoptic-drawing-and-programming">
<h3>Synoptic drawing and programming<a class="headerlink" href="#synoptic-drawing-and-programming" title="Permalink to this headline">¶</a></h3>
<p>ATK provides a complete synoptic system. As already mentioned in the
introduction, the main idea of the synoptic drawing and viewing system
is to provide the application designer with a simple and a flexible way
to draw a synoptic and to animate it at runtime according to the values
and states read from the control system.</p>
<div class="section" id="what-is-a-synoptic-application">
<h4>What is a synoptic application?<a class="headerlink" href="#what-is-a-synoptic-application" title="Permalink to this headline">¶</a></h4>
<p>In an application based on a synoptic the user can see a “free style”
drawing, in which different parts can report on the tango device states
and/or the tango attribute values of the control system. We say that the
drawing is “animated” at run-time according to the values / states of
the control system objects.</p>
<p>The following picture is the snapshot of the ESRF Linac control
application based on a synoptic. The synoptic is the drawing in the
center with the background color in blue.</p>
<p><a class="reference internal" href="../../_images/image31.jpeg"><img alt="image27" src="../../_images/image31.jpeg" style="width: 6.29792in; height: 3.66042in;" /></a></p>
<p>As you can see the drawing components in the synoptic have different
colors according to the device state attribute to which they are linked.
For example the drawing component linked to <em>“elin/gun/aux/State”</em> is
colored in orange because the value of this state attribute is <em>Alarm</em>.
Moreover you can see the red arrow (Beam Stop) on the slider pointing to
the value of the tango attribute <em>“elin/master/op/SRCT_limit”</em> which is
92 as it is also represented outside of the synoptic on the top of the
window.</p>
</div>
<div class="section" id="what-kind-of-animations-are-provided-at-run-time">
<h4>What kind of animations are provided at run-time?<a class="headerlink" href="#what-kind-of-animations-are-provided-at-run-time" title="Permalink to this headline">¶</a></h4>
<p>The run-time behavior of the synoptic is predefined in ATK and it
depends on the type of the graphic object (free drawing, dynos, sliders,
buttons, …) on one hand and the tango control object to which it is
linked (state attribute, numerical attribute, boolean attribute, tango
command …). The exact run-time behaviour in each case will be discussed
in a further section.</p>
</div>
</div>
</div>
<div class="section" id="appendix-1-attribute-viewers-setters">
<h2>Appendix 1 : attribute viewers / setters<a class="headerlink" href="#appendix-1-attribute-viewers-setters" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="5%" />
<col width="8%" />
<col width="42%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Tango format and data type</strong></th>
<th class="head"><strong>View / Set</strong></th>
<th class="head"><strong>ATK class used as model</strong></th>
<th class="head"><strong>ATK viewer / setter</strong></th>
<th class="head"><strong>Tutorial section</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first">Scalar</p>
<p>Any type</p>
<p class="last">Single attribute</p>
</td>
<td>View and Set</td>
<td>AttributeList</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/singleAtt-SLV.jpg">*ScalarListViewer ScalarListSetter NumberScalarListViewer*</a></td>
<td><a class="reference external" href="#use-a-generic-scalar-attribute-viewer-used-to-view-and-or-to-set">*Use a generic scalar attribute viewer*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>Numeric type</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>INumberScalar</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/simpleScalarViewer.jpg">*SimpleScalarViewer*</a></p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/numberScalarViewer.jpg">*NumberScalarViewer*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/numberScalarPb1.jpg">*NumberScalarProgressBar*</a></p>
</td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>DevString</p>
<p class="last">single attribute</p>
</td>
<td>View</td>
<td>IStringScalar</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/simpleScalarViewerString.jpg">*SimpleScalarViewer*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/statusViewer.jpg">*StatusViewer*</a></p>
</td>
<td><p class="first"><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></p>
<p class="last"><a class="reference external" href="#device-state-and-device-status">*device status*</a></p>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>DevBoolean</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>IBooleanScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanScalarViewers.jpg">*SignalScalarLightViewer*</a></td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>DevBoolean</p>
<p class="last">Single attribute</p>
</td>
<td>View and Set</td>
<td>IBooleanScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanScalarViewers.jpg">*BooleanScalarCheckBoxViewer*</a></td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>DevShort, DevUshort</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>IEnumScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/EnumScalarViewerOnly.jpg">*SimpleEnumScalarViewer*</a></td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>DevState</p>
<p class="last">single attribute</p>
</td>
<td>View</td>
<td>IDevStateScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/stateViewer.jpg">*StateViewer*</a></td>
<td><p class="first"><a class="reference external" href="#device-state-and-device-status">*device state*</a></p>
<p class="last"><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></p>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>Numeric type</p>
<p class="last">Single attribute</p>
</td>
<td>Set</td>
<td>INumberScalar</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/numberScalarWheelEditor.jpg">*NumberScalarWheelEditor*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/numberScalarComboEditor.jpg">*NumberScalarComboEditor*</a></p>
</td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>DevString</p>
<p class="last">single attribute</p>
</td>
<td>Set</td>
<td>IStringScalar</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/stringScalarEditor.jpg">*StringScalarEditor*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/stringScalarComboEditor.jpg">*StringScalarComboEditor*</a></p>
</td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>DevBoolean</p>
<p class="last">Single attribute</p>
</td>
<td>Set</td>
<td>IBooleanScalar</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanScalarSetters.jpg">*BooleanScalarCheckBoxViewer*</a></p>
<p><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanScalarSetters.jpg">*BooleanScalarComboEditor*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanScalarSetters.jpg">*SignalScalarButtonSetter*</a></p>
</td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>DevShort, DevUshort</p>
<p class="last">Single attribute</p>
</td>
<td>Set</td>
<td>IEnumScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/EnumScalarComboEditor.jpg">*EnumScalarComboEditor*</a></td>
<td><a class="reference external" href="#using-a-specific-viewer-setter-adapted-to-the-attribute-type">*Using specific viewers …*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>Any type</p>
<p class="last">Collection of attributes</p>
</td>
<td>View and Set</td>
<td>AttributeList</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/AttlViewer1.jpg">*ScalarListViewer ScalarListSetter NumberScalarListViewer*</a></td>
<td><p class="first"><a class="reference external" href="#attributelist-viewers">*AttributeList viewers*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/AttListViewersAndSetters.htm">*AttListViewer Flash Demo*</a></p>
</td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>Numeric type</p>
<p class="last">Collection of attributes</p>
</td>
<td>View</td>
<td>AttributePolledList</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/Trend.jpg">*Trend*</a></td>
<td><p class="first"><a class="reference external" href="#the-trend-of-number-scalar-attributes">*The trend of numberScalar*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/TrendDemo.htm">*Trend Flash demo*</a></p>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>DevBoolean</p>
<p class="last">Collection of attributes</p>
</td>
<td>View</td>
<td>AttributePolledList</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/booleanTrend.jpg">*BooleanTrend*</a></td>
<td><a class="reference external" href="#the-trend-of-boolean-scalar-attributes">*The trend of boolean scalar attributes*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Scalar</p>
<p>Any type</p>
<p class="last">Collection of attributes</p>
</td>
<td>View and Set</td>
<td>IAttribute</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/MultiScalarTable.jpg">*MultiScalarTableViewer*</a></td>
<td><p class="first"><a class="reference external" href="#_A_set_of">*A set of scalar att…*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/flash-demos/MultiScalarTableViewer.htm">*Scalar Table Flash demo*</a></p>
</td>
</tr>
<tr class="row-odd"><td><p class="first">Scalar</p>
<p>DevState</p>
<p class="last">Collection of attributes</p>
</td>
<td>View</td>
<td>IDevStateScalar</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/tabbedPaneDevStateScalarViewer.jpg">*TabbedPaneDevStateScalarViewer*</a></td>
<td><a class="reference external" href="#a-set-of-devstatescalar-attributes-tabbedpanedevstatescalarviewer">*A set of DevStateScalar attrributes*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Spectrum</p>
<p>Numeric type</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>INumberSpectrum</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/NumberSpectrumViewer.jpg">*NumberSpectrumViewer*</a></td>
<td><a class="reference external" href="#numberspectrum-attributes">*NumberSpectrum attributes*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Spectrum</p>
<p>DevString</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>IStringSpectrum</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/SimpleStringSpectrumViewer.jpg">*SimpleStringSpectrumViewer*</a></td>
<td><a class="reference external" href="#stringspectrum-attributes">*StringSpectrum attributes*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Spectrum</p>
<p>DevState</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>IDevStateSpectrum</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/DevStateSpectrumViewer.jpg">*DevStateSpectrumViewer*</a></td>
<td><a class="reference external" href="#devstatespectrum-attributes">*DevStateSpectrum attributes*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Spectrum</p>
<p>Numeric type</p>
<p class="last">Collection of attributes</p>
</td>
<td>View</td>
<td>INumberSpectrum</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/MultiNumberSpectrumViewer.jpg">*MultiNumberSpectrumViewer*</a></td>
<td><a class="reference external" href="#a-set-of-numberspectrum-attributes-in-one-single-chart">*A set of NumberSpectrum attributes in a chart*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Spectrum</p>
<p>Numeric type</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>INumberSpectrum</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/NumberSpectrumItemTrend.jpg">*NumberSpectrumItemTrend*</a></td>
<td><a class="reference external" href="#the-trend-of-number-spectrum-attributes">*Trend of number spectrum attributes*</a></td>
</tr>
<tr class="row-odd"><td><p class="first">Image</p>
<p>Numeric type</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>INumberImage</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/NumberImageViewer.jpg">*NumberImageViewer*</a></td>
<td><a class="reference external" href="#numberimage-attributes">*NumberImage attributes*</a></td>
</tr>
<tr class="row-even"><td><p class="first">Image</p>
<p>DevString</p>
<p class="last">Single attribute</p>
</td>
<td>View</td>
<td>IStringImage</td>
<td>StringImageTableViewer</td>
<td><a class="reference external" href="#stringimage-attributes">*StringImage attributes*</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="appendix-2-command-viewers">
<h2>Appendix 2 : command viewers<a class="headerlink" href="#appendix-2-command-viewers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="7%" />
<col width="9%" />
<col width="36%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Input argument data type</strong></th>
<th class="head"><p class="first"><strong>Output</strong></p>
<p class="last"><strong>argument data type</strong></p>
</th>
<th class="head"><strong>ATK class used as model</strong></th>
<th class="head"><strong>ATK Command Viewer</strong></th>
<th class="head"><strong>Tutorial section</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first">DevVoid</p>
<p class="last">no input</p>
</td>
<td><p class="first">DevVoid</p>
<p class="last">no output</p>
</td>
<td>ICommand</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/vvCmdViewers.jpg">*VoidVoidCommandViewer*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/vvCmdViewers.jpg">*ConfirmCommandViewer*</a></p>
</td>
<td><a class="reference external" href="#commands-with-no-input-and-no-output-argument-voidvoidcommand">*Commands with no input and no output*</a></td>
</tr>
<tr class="row-odd"><td>DevBoolean</td>
<td><p class="first">DevVoid</p>
<p class="last">no output</p>
</td>
<td>ICommand</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/onOffCmdViewers.jpg">*OnOffCheckboxCommandViewer*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/onOffCmdViewers.jpg">*OnOffSwitchCommandViewer*</a></p>
</td>
<td><a class="reference external" href="#commands-with-devboolean-input-argument-and-no-output-argument-booleanvoidcommand">*Commands with DevBoolean input and no output*</a></td>
</tr>
<tr class="row-even"><td>DevString</td>
<td><p class="first">DevVoid</p>
<p class="last">no output</p>
</td>
<td>ICommand</td>
<td>OptionComboCommandViewer</td>
<td><a class="reference external" href="#commands-with-devstring-input-argument-and-no-output-argument">*Commands with DevString input and no output*</a></td>
</tr>
<tr class="row-odd"><td>Any Type</td>
<td>Any Type</td>
<td>ICommand</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/anyCmdv.jpg">*AnyCommandViewer*</a></td>
<td><a class="reference external" href="#commands-with-any-type-of-input-argument-and-any-type-of-output-argument">*Commands with any type of input and any type of output*</a></td>
</tr>
<tr class="row-even"><td>Any Type</td>
<td>Any Type</td>
<td><p class="first"><em>A collection of commads</em></p>
<p class="last">CommandList</p>
</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/commandComboViewer.jpg">*CommandComboViewer.jpg*</a></td>
<td><a class="reference external" href="#display-a-collection-of-tango-device-commands">*A collection of commands*</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="appendix-3-error-viewers">
<h2>Appendix 3 : error viewers<a class="headerlink" href="#appendix-3-error-viewers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="11%" />
<col width="49%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Type of ATK error</strong></th>
<th class="head"><strong>ATK method to use</strong></th>
<th class="head"><strong>ATK Error Viewer</strong></th>
<th class="head"><strong>Tutorial section</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Attribute read error during the attribute refreshing</td>
<td>addErrorListener</td>
<td><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/ErrorHistory.jpg">*ErrorHistory*</a></td>
<td><a class="reference external" href="#errorhistory">*ErrorHistory*</a></td>
</tr>
<tr class="row-odd"><td>Attribute setting error during the attribute set value</td>
<td>addSetErrorListener</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/ErrorHistory.jpg">*ErrorHistory*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/ErrorPopup.jpg">*ErrorPopup*</a></p>
</td>
<td><p class="first"><a class="reference external" href="#errorhistory">*ErrorHistory*</a></p>
<p class="last"><a class="reference external" href="#errorpopup">*ErrorPopup*</a></p>
</td>
</tr>
<tr class="row-even"><td>Command execution error</td>
<td>addErrorListener</td>
<td><p class="first"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/ErrorHistory.jpg">*ErrorHistory*</a></p>
<p class="last"><a class="reference external" href="http://www.esrf.fr/computing/cs/tango/tango_doc/atk_tutorial/screenshots/ErrorPopup.jpg">*ErrorPopup*</a></p>
</td>
<td><p class="first"><a class="reference external" href="#errorhistory">*ErrorHistory*</a></p>
<p class="last"><a class="reference external" href="#errorpopup">*ErrorPopup*</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="atk_java_doc.html" class="btn btn-neutral float-right" title="ATK Java documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Tango Application Toolkit “ATK”" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>