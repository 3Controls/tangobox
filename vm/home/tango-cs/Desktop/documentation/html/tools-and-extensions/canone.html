

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Canone &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../index.html"/>
        <link rel="up" title="Tools and Extensions" href="index.html"/>
        <link rel="next" title="Overview" href="archiving/overview.html"/>
        <link rel="prev" title="QTango" href="qtango/qtango.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tools and Extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="astor/index.html">Astor (TANGO Manager)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jive/index.html">Jive</a></li>
<li class="toctree-l2"><a class="reference internal" href="pogo/index.html">Pogo (Class Generator)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdraw/jdraw.html">Synoptic and JDraw</a></li>
<li class="toctree-l2"><a class="reference internal" href="atk/index.html">Tango Application Toolkit “ATK”</a></li>
<li class="toctree-l2"><a class="reference internal" href="logviewer/index.html">LogViewer Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="qtango/qtango.html">QTango</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Canone</a></li>
<li class="toctree-l2"><a class="reference internal" href="archiving/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="archiving/HDB.html">HDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="archiving/HDB++.html">HDB++</a></li>
<li class="toctree-l2"><a class="reference internal" href="taurus/index.html">Taurus (Python GUI library)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/c-lang.html">C Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/matlab-and-octave.html">Matlab &amp; Octave</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/labVIEW.html">LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/igor-pro.html">Igor Pro</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings/panorama.html">Panorama</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/advanced/rest-api.html">Tango REST API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../administration/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-howtos/index.html">Tutorials and How-Tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Tools and Extensions</a> &raquo;</li>
        
      <li>Canone</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tools-and-extensions/canone.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="canone">
<h1>Canone<a class="headerlink" href="#canone" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Canone is the PHP web interface of Tango.
The external appearance is a set of “panels” from which a user can interact with Tango via web.
Each panel is composed of a certain number of “widgets” and some HTML tags; a widget is a graphic element which represent a single attribute or command (or property, yet not implemented).</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The installation requires a web server with PHP; the PHP should be configured with Sockets, SQLite and GD2.
It’s also required a machine (possibly different from the web server) with PyTango.
The client side requires only a web browser (Firefox is the best choice) with JavaScript and pop-ups enabled.</p>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>You can download Canone <a class="reference external" href="https://sourceforge.net/projects/tango-cs/files/gui/Canone_3.0.2.zip/download">here</a>.</p>
</div>
<div class="section" id="panels">
<h2>Panels<a class="headerlink" href="#panels" title="Permalink to this headline">¶</a></h2>
<p>With Canone it’s easy to build and customize control panels. A user endowed of enough privilege can save many different panels and chose one of them to be displayed from a selection box. A common panel is composed by a title and a simple table of widgets, but the page deployment may be as complex as allowed by HTML; sub-tables, external links are only a few examples of what can be added.</p>
</div>
<div class="section" id="panel-configuration">
<h2>Panel Configuration<a class="headerlink" href="#panel-configuration" title="Permalink to this headline">¶</a></h2>
<p>The configuration of a panel concerns two different aspects: the configuration of the page deployment and the configuration of each single widget.
The page deployment is configured pressing the XML button which makes an easy pop-up window to appear; in this dialog there is the XML code corresponding to the configuration of the panel. Some XML tags are specific of Canone, but others are identical to HTML and can be used to modify the deployment of the panel. This XML code can be modified freely but a certain caution is recommended! Don’t use double apices (“), it’s better to use single apices (‘)
The “modify” button allows the modification or the removal of any widget. Pressing this button each widget is surrounded by a frame in which are included also two buttons: a “modify” button (see head) and a “delete” button.
Warning: in order to eliminate a widget it’s better to use the XML dialog.</p>
</div>
<div class="section" id="widgets">
<h2>Widgets<a class="headerlink" href="#widgets" title="Permalink to this headline">¶</a></h2>
<p>A widget is a graphical element which displays one (or more) control system parameter. Now only read attributes and write commands are supported.
Each widget is contained in its own class which extends the generic “widget” class. A fundamental attribute of this class is called “config” and contains all the parameters that can be customized from outside and for each parameter: an identifier, a sort of type definition, the default value, a short description and a long description (intended for the online help).
The setParam() method allows to set all the parameters with a single string.
Some widgets are implemented as PNG images others as tables, in both cases the HTML code necessary to visualize the widget is returned by the plot() method.</p>
</div>
<div class="section" id="widget-configuration">
<h2>Widget Configuration<a class="headerlink" href="#widget-configuration" title="Permalink to this headline">¶</a></h2>
<p>Each widget is associated with an attribute or a command and a panel. There is a table intended to customize each parameter of the widget. The colors are configurable also through color selection pop-up.</p>
</div>
<div class="section" id="users">
<h2>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h2>
<p>Canone supports user access and user administration.
The user autentication process in a web environment can’t be too simple and can’t assume at any time the loyalty of users.
The access is validated using data stored in a database (SQLite).</p>
</div>
<div class="section" id="user-login">
<h2>User Login<a class="headerlink" href="#user-login" title="Permalink to this headline">¶</a></h2>
<p>Users must be registered in the system with Username and Password. Each user must be inserted in a user group, permissions are granted to user groups.
Associated to a user group may be several IP numbers (and netmask) which entitle the rights of the user group without username and password.
A user inserted through IP in a given group can at any time login with username and password and get the permission of a different user group.</p>
</div>
<div class="section" id="permissions">
<h2>Permissions<a class="headerlink" href="#permissions" title="Permalink to this headline">¶</a></h2>
<p>There are four levels of permissions:</p>
<blockquote>
<div><ul class="simple">
<li><strong>read</strong>: only reading operations are granted, any write operation is denied</li>
<li><strong>operator</strong>: both reading and writing operations are granted</li>
<li><strong>expert</strong>: both reading and writing operations are granted, panels may be modified</li>
<li><strong>none</strong>: all operations are denied</li>
</ul>
</div></blockquote>
<p>There is also a special group called admin which is the only with administration permissions. They can create or delete users, grant or revoke permissions to everybody.</p>
</div>
<div class="section" id="administration">
<h2>Administration<a class="headerlink" href="#administration" title="Permalink to this headline">¶</a></h2>
<p>The administration utility is coposed by three tools.</p>
<blockquote>
<div><ul class="simple">
<li><strong>access control</strong>: all groups (for users, devices and panels) are listed and privileges can be granted or revoked on the fly. Each user group must have a default permission which is overridden by specific permission given to the combination of user group and device group or user group and panel group (e.g. the host group has no default privilege but may have privilege to se panels in a specific group)</li>
<li><strong>user</strong>: you can search, create, modify or delete a user account</li>
<li><strong>database</strong>: a generic database graphical client allows to change any configuration. Should be used only by expert administrators</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="communications">
<h2>Communications<a class="headerlink" href="#communications" title="Permalink to this headline">¶</a></h2>
<p>The communication to Tango is implemented through a raw text socket.
There is a Python script which include the Python to Tango binding (PyTango) and act both as a Tango client and socket server. In an infinite loop it recognize the requests coming from the PHP through the socket, retrieves the data from the Tango host defined by the $TANGO_HOST environment variable and return the results as a single string. The first part of the string is the number of bytes of the rest of the string.
The TANGO_HOST may be changed from the client socket on a per call basis.
The socket is multi-channel i.e. many instances of the script may be launched each with a progressive integer parameter, each script will work on a port given by the port base plus the given parameter.
In the first few lines of the script you must customize the base port and the IP address of the authorized clients, all other clients will be immediately disconnected.</p>
</div>
<div class="section" id="a-side-effect-soap">
<h2>A side-effect: SOAP<a class="headerlink" href="#a-side-effect-soap" title="Permalink to this headline">¶</a></h2>
<p>The PHP to Python socket interface which deals with the buffer database and un-serialize the data coming from the socket was an excellent starting point to create a web server powered by SOAP. It was so easy to create such a server that it can be considered as a side-effect of Canone. Along with the server (tango-serveer.php) there is also a 50 lines client for test purpose (tango-client.php). Of course also this server still doesn’t implement command and property queries.</p>
</div>
<div class="section" id="the-todo-list">
<h2>The TODO list<a class="headerlink" href="#the-todo-list" title="Permalink to this headline">¶</a></h2>
<p>This are only a few possible extension/improvements, many more may be implemented in future releases:</p>
<blockquote>
<div><ul class="simple">
<li>add quality factorof attributes</li>
<li>extend the utilization of AJAX technology</li>
<li>properties interfaces</li>
<li>add LDAP support (only for password validation)</li>
<li>export to PDF, XLS, e-mail</li>
<li>add other generic and some specific widgets</li>
<li>save and load from file</li>
<li>improve customization of widgets</li>
<li>use SOAP to replace raw sockets</li>
<li>add graphical editor as a valid alternative to HTML text editor</li>
<li>improve security checks</li>
<li>add panels selection with tabs</li>
<li>split this manual into user and administrator manual</li>
<li>improve the messages and dialog of the online help</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>What’s Canone?</dt>
<dd>Canone is a web interface to Tango. With Canone you can build your own panels and interact with any installation of Tango.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Is Canone a graphical interface?</dt>
<dd>Canone is a fully graphical and automated interface.
You can select and configure some graphical elements (widgets) and combine them in one or more panels.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>What’s a widget?</dt>
<dd>A widget is a pre-defined graphical objet which is associated with a single attribute and can take several configurations (e.g. background color, size, shape, etc).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>What’s a panel?</dt>
<dd>A panel is a collection of widget + some editable HTML tags.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Why HTML autorefresh isn’t supported?</dt>
<dd>Autorefresh isn’t supported becouse it would make uncomfortable any command sent to Tango from Canone. If an autorefresh event appens exactly when you are pressing a button, your click may be lost (a test gave aproximately 25% loss) and even worst you will not be notified if it has been lost or not.
From version 2.0 some widgets support autorefresh using AJAX.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Why I can’t see any panel?</dt>
<dd>You may be in a group of users which has no privilege to see any panel or the tango-host may be wrong. To check - modify the tango-host you should ask to the administrator who can modify it from the panel construction tool or he can modify a configuration file.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="archiving/overview.html" class="btn btn-neutral float-right" title="Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="qtango/qtango.html" class="btn btn-neutral" title="QTango" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>