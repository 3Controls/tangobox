

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tango REST API &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="Advanced" href="index.html"/>
        <link rel="next" title="The TANGO IDL file : Module Tango" href="IDL.html"/>
        <link rel="prev" title="Tango Device Server Model" href="TangoDeviceServerModel.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Developer’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tools-and-extensions/index.html">Tools and Extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/astor/index.html">Astor (TANGO Manager)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/jive/index.html">Jive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/pogo/index.html">Pogo (Class Generator)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/jdraw/jdraw.html">Synoptic and JDraw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/atk/index.html">Tango Application Toolkit “ATK”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/logviewer/index.html">LogViewer Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/qtango/qtango.html">QTango</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/canone.html">Canone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/archiving/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/archiving/HDB.html">HDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/archiving/HDB++.html">HDB++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/taurus/index.html">Taurus (Python GUI library)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/c-lang.html">C Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/matlab-and-octave.html">Matlab &amp; Octave</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/labVIEW.html">LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/igor-pro.html">Igor Pro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools-and-extensions/bindings/panorama.html">Panorama</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tango REST API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-howtos/index.html">Tutorials and How-Tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Developer’s Guide</a> &raquo;</li>
        
          <li><a href="index.html">Advanced</a> &raquo;</li>
        
      <li>Tango REST API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/development/advanced/rest-api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tango-rest-api">
<span id="id1"></span><h1>Tango REST API<a class="headerlink" href="#tango-rest-api" title="Permalink to this headline">¶</a></h1>
<p>Tango provides REST API specification. This can be used to implement integrations of Tango with 3rd party products using http protocol instead of tango protocol.</p>
<p>Simple example of such 3rd product can be a mobile client application for monitoring Tango.</p>
<p>This section tries to answer the following questions:</p>
<ul class="simple">
<li>What is REST and why it is useful</li>
<li>Getting started with simple example</li>
<li>Example of a safe REST API deployment at ESRF</li>
<li>Further steps</li>
</ul>
<div class="section" id="tango-rest-api-specification">
<h2>Tango REST API specification<a class="headerlink" href="#tango-rest-api-specification" title="Permalink to this headline">¶</a></h2>
<p>Shortly speaking REST API in general exports resources. These resources are accessible using URL addressing. Client performs actions on the resources defined by http methods. Typically these are:</p>
<p>GET - request a resource</p>
<p>PUT - update a resource</p>
<p>POST - create a new resource</p>
<p>DELETE - remove a resource</p>
<p>Tango REST API exports Tango hosts; Tango devices; Tango device attributes, commands and pipes. So it follows <a class="reference internal" href="TangoDeviceServerModel.html#tango-device-server-model"><span class="std std-ref">Tango Device Server Model</span></a>.</p>
<p>For example, one can request <a class="reference internal" href="../../reference/glossary.html#term-tango-host"><span class="xref std std-term">Tango Host</span></a> using Tango REST API:</p>
<p><strong class="command">GET tango/rest/rc4/hosts/tango_host/10000</strong></p>
<p>Here one uses Tango REST API implementation related to version RC4 [TODO link to the branch] this relates to
tango/rest/rc4 part of the exmaple URL. <cite>hosts</cite> exports all the :term:&lt;Tango Hosts <cite>Tango Host</cite>&gt; accessible through
this Tango REST API implementation. tango_host/10000 relates to TANGO_HOST=tango_host:10000.</p>
<p>In the following example client requests for a device attribute:</p>
<p><strong class="command">GET tango/rest/rc4/hosts/tango_host/10000/devices/sys/tg_test/1/attributes/double_scalar/value</strong></p>
<p>Again here <cite>tango/rest/rc4</cite> relates to Tango REST API version RC4 implementation; <cite>hosts/tango_host/10000</cite> relates to TANGO_HOST=tango_host:10000;  <cite>devices/sys/tg_test/1</cite> relates to the device <cite>tango://tango_host:10000/sys/tg_test/1</cite> exported through this Tango REST API; finally <cite>attributes/double_scalar/value</cite> relates to the value of the attribute.</p>
<p>The third example is how client executes a command of a device:</p>
<p><strong class="command">PUT tango/rest/rc4/hosts/tango_host/10000/devices/sys/tg_test/1/commands/DevDouble?v=3.14</strong></p>
<p>Here client executes tango://tango_host:10000/sys/tg_test/1/DevDouble with the input arg=3.14</p>
<p>The full reference can be found following this <a class="reference external" href="http://tango-rest-api.readthedocs.io/en/latest">link</a></p>
<p>Real life example of getting beam current value from ESRF:</p>
<p><a class="reference external" href="https://mstatus.esrf.fr/tango/rest/rc4/hosts/tangorest01.esrf.fr/10000/devices/sys/mcs/facade/attributes/current/value">https://mstatus.esrf.fr/tango/rest/rc4/hosts/tangorest01.esrf.fr/10000/devices/sys/mcs/facade/attributes/current/value</a></p>
<p>Use tango-cs/tango when prompted.</p>
</div>
<div class="section" id="tango-rest-api-implementations">
<h2>Tango REST API implementations<a class="headerlink" href="#tango-rest-api-implementations" title="Permalink to this headline">¶</a></h2>
<p>Since Tango REST API itself is only a specification one needs an actual implementation running some where.</p>
<p>Known implementations are:</p>
<p><a class="reference external" href="https://bitbucket.org/hzgwpn/mtangorest.server">mtangorest.server</a></p>
<p>Please refer to the corresponding implementation documentation on how to install and use it.</p>
<p>In a nutshell download the latest fat jar distribution and start the server via <strong class="command">java -DTANGO_HOST=localhost:10000 -jar mtangorest.server.jar -nodb -dlist sys/rest/0</strong></p>
<p>Basically one can test the installation trying to read an attribute value from a device. Typically there is a TangoTest server running on the tango host through browser:</p>
<p><strong class="command">http://localhost:10001/tango/rest/rc4/hosts/localhost/10000/devices/sys/tg_test/1/attributes/double_scalar/value</strong></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;double_scalar&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mf">179.04696279859678</span><span class="p">,</span>
    <span class="nt">&quot;quality&quot;</span><span class="p">:</span><span class="s2">&quot;ATTR_VALID&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="mi">1493918496122</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="deployment">
<h2>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h2>
<p>As Tango REST is supposed to export Tango via http to the Internet the usual question is how to protect Tango from the unwanted activity.</p>
<p>The deployment of the Tango REST API can be quite safe. Usually one wants to put Tango REST API server behind a reverse proxy and restrict its access to a single <a class="reference internal" href="../../reference/glossary.html#term-tango-host"><span class="xref std std-term">Tango Host</span></a>. Reverse proxy can also allow connections only via https.</p>
<p>As every request via REST API must be validated against Tango Access Control this adds an extra layer of security.</p>
<p>Below is a deployment scheme of REST API at ESRF:</p>
<p><a class="reference external" href="https://mstatus.esrf.fr/tango/rest">https://mstatus.esrf.fr/tango/rest</a></p>
<p>Use tango-cs/tango when prompted.</p>
<p>In this installation REST API exports readonly forwarded attributes and is accessible via secured http connection.</p>
<img alt="../../_images/ESRF.png" src="../../_images/ESRF.png" />
<p>Every request passes HAProxy configured to use https protocol for secure connection. On its backend HAproxy speaks with Tango REST server which in turn can access only one tango host where a device of class <a class="reference external" href="https://github.com/tango-controls/ForwardedComposer">ForwardComposer</a> is defined. This device provides read only access to MStatus Tango device with status information about the storage ring at ESRF.</p>
<p>In addition Tango REST API can be integrated with authentication and authorisation services like kerberos.</p>
<p>Finally Tango REST API implementation should use Tango Access Control to validate every request made from the Internet.</p>
</div>
<div class="section" id="further-steps">
<h2>Further steps<a class="headerlink" href="#further-steps" title="Permalink to this headline">¶</a></h2>
<p>Install Tango REST API server localy or using docker [reference].</p>
<p>Develop your REST client or use 3rd party frameworks (<a class="reference external" href="http://bitbucket.org/hzgwpn/mtango">mTangoSDK</a>, <a class="reference external" href="https://tangojs.github.io/">tangojs</a>).</p>
<p>Deploy everything in the local network or in the cloud [reference].</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>[1] <a class="reference external" href="http://tango-rest-api.readthedocs.io/en/latest">Tango REST API specification</a>
[2] <a class="reference external" href="https://github.com/tango-controls/rest-api">Tango REST API specification on GitHub</a>
[3] <a class="reference external" href="https://bitbucket.org/hzgwpn/mtangorest.server">mtangorest.server – Tango REST API implementation</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="IDL.html" class="btn btn-neutral float-right" title="The TANGO IDL file : Module Tango" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="TangoDeviceServerModel.html" class="btn btn-neutral" title="Tango Device Server Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>