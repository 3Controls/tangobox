

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Starting a Tango control system &mdash; Tango Controls 9.2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Tango Controls 9.2.5 documentation" href="../../index.html"/>
        <link rel="up" title="Deployment" href="index.html"/>
        <link rel="next" title="Running a device server without SQL database" href="without-sql-db.html"/>
        <link rel="prev" title="Deployment" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Tango Controls
          

          
            
            <img src="../../_static/logo_tangocontrols_white.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to Tango Controls documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools-and-extensions/index.html">Tools and Extensions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Deployment</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Starting a Tango control system</a></li>
<li class="toctree-l3"><a class="reference internal" href="without-sql-db.html">Running a device server without SQL database</a></li>
<li class="toctree-l3"><a class="reference internal" href="property-file.html">The property file syntax</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-howtos/index.html">Tutorials and How-Tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Tango Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Administration</a> &raquo;</li>
        
          <li><a href="index.html">Deployment</a> &raquo;</li>
        
      <li>Starting a Tango control system</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/administration/deployment/starting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="starting-a-tango-control-system">
<span id="starting-tango"></span><h1>Starting a Tango control system<a class="headerlink" href="#starting-a-tango-control-system" title="Permalink to this headline">¶</a></h1>
<div class="section" id="without-database">
<h2>Without database<a class="headerlink" href="#without-database" title="Permalink to this headline">¶</a></h2>
<p>When used without database, there is no additional process to start.
Simply starts device server using the -nodb option (and eventually the
-dlist option) on specific port. See [sec:Device-server-without] to find
informations on how to start/write Tango device server not using the
database.</p>
</div>
<div class="section" id="with-database">
<h2>With database<a class="headerlink" href="#with-database" title="Permalink to this headline">¶</a></h2>
<p>Starting the Tango control system simply means starting its database
device server on a well defined host using a well defined port. Use the
host name and the port number to build the TANGO_HOST environment
variable. See [Env variable] to find how starting a device server on a
specific host. Obviously, the underlying database software (MySQL) must
be started before the Tango database device server. The Tango database
server connects to MySQL using a default logging name set to root. You
can change this behaviour with the MYSQL_USER and MYSQL_PASSWORD
environment variables. Define them before starting the database server.</p>
<p>If you are using the Tango administration graphical tool called
<strong>Astor</strong>, you also need to start a specific Tango device server called
<strong>Starter</strong> on each host where Tango device server(s) are running. See
<a class="reference internal" href="../../reference/bibliography.html#astor" id="id1">[ASTOR]</a> for Astor documentation. This starter
device server is able to start even before the Tango database device
server is started. In this case, it will enter a loop in which it
periodically tries to access the Tango database device. The loop exits
and the server starts only if the database device access succeed.</p>
</div>
<div class="section" id="with-database-and-event">
<h2>With database and event<a class="headerlink" href="#with-database-and-event" title="Permalink to this headline">¶</a></h2>
<div class="section" id="for-tango-releases-lower-than-8">
<h3>For Tango releases lower than 8<a class="headerlink" href="#for-tango-releases-lower-than-8" title="Permalink to this headline">¶</a></h3>
<p>On top of what is described in the previous chapter, using event means
using CORBA Notification service. Start one Notification Service daemon
on each host where device server(s) used via events are running. The
Notification Service daemon event channel factory IOR has to be
registered in the Tango database. This is done with the <strong>notifd2db</strong>
command. The notification daemon is a process with a high thread number.
By default, Unix like operating systems reserve a big amount of memory
for each thread stack (8 MByte for Linux/Ubuntu, 10 MByte for
Linux/RedHat 4). If your process has several hundreds of threads, this
could generate a too high memory requirement on virtual memory and even
exceed the maximun allowed memory per process (3 GBytes on Linux for 32
bits computer). The notification service daemon works very well with a
value of only 2 Mybtes for thread stack. The Unix command line ulimit -s
2048 asks the operating system to give 2 Mbytes for each thread stack.
Example of starting and registering a Notification Service daemon on a
UNIX like operating system</p>
<pre class="code cpp literal-block">
<span class="ln">1 </span>  <span class="name">ulimit</span> <span class="operator">-</span><span class="name">s</span> <span class="literal number integer">2048</span>
<span class="ln">2 </span>  <span class="name">notifd</span> <span class="operator">-</span><span class="name">n</span> <span class="operator">-</span><span class="name">DDeadFilterInterval</span><span class="operator">=</span><span class="literal number integer">300</span> <span class="operator">&amp;</span>
<span class="ln">3 </span>  <span class="name">notifd2db</span>
</pre>
<p>The Notification Service daemon is started at line 2. Its
-DDeadFilterInterval option is used to specify some internal cleaning of
dead objects within the notification service. The -n option is used to
disable the use of the CORBA Naming Service for registering the default
event channel factory. The registration of the Notification Service
daemon in the Tango database is done at line 2.</p>
<p>It differs on a Windows computer</p>
<pre class="code cpp literal-block">
<span class="ln">1 </span>  <span class="name">notifd</span> <span class="operator">-</span><span class="name">n</span> <span class="operator">-</span><span class="name">DDeadFilterInterval</span><span class="operator">=</span><span class="literal number integer">300</span> <span class="operator">-</span><span class="name">DFactoryIORFileName</span><span class="operator">=</span><span class="name label">C</span><span class="punctuation">:</span><span class="error">\</span><span class="name">Temp</span><span class="error">\</span><span class="name">evfact</span><span class="punctuation">.</span><span class="name">ior</span> <span class="operator">&amp;</span>
<span class="ln">2 </span>  <span class="name">notifd2db</span> <span class="name label">C</span><span class="punctuation">:</span><span class="error">\</span><span class="name">Temp</span><span class="error">\</span><span class="name">evfact</span><span class="punctuation">.</span><span class="name">ior</span>
</pre>
</div>
<div class="section" id="for-release-8-and-above">
<h3>For release 8 and above<a class="headerlink" href="#for-release-8-and-above" title="Permalink to this headline">¶</a></h3>
<p>A new event system has been implemented starting with Tango release 8.
With this new event system, the CORBA Notification service is not needed
any more. This means that <strong>as soon</strong> as all Tango device server
processes running on a host and all clients using events from their
devices used Tango 8, it is not required to start any process other than
the device servers and the clients. You can forget the previous
sub-chapter!</p>
</div>
</div>
<div class="section" id="with-file-used-as-database">
<h2>With file used as database<a class="headerlink" href="#with-file-used-as-database" title="Permalink to this headline">¶</a></h2>
<p>When used with database on file, there is no additional process to
start. Simply starts device server using the -file option specifying
file name port. See [sec:Device-server-file] to find informations on how
to start Tango device server using database on file.</p>
</div>
<div class="section" id="with-file-used-as-database-and-event">
<h2>With file used as database and event<a class="headerlink" href="#with-file-used-as-database-and-event" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>For Tango releases lower than 8<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Using event means using CORBA Notification service. Start one
Notification Service daemon on the host where device server(s) using
events are running. The Notification Service daemon event channel
factory IOR has to be registered in the file(s) use as database. This is
done with the <strong>notifd2db</strong> command. Example of starting and registering
a Notification Service daemon on a UNIX like operating system</p>
<pre class="code cpp literal-block">
<span class="ln">1 </span>  <span class="name">notifd</span> <span class="operator">-</span><span class="name">n</span> <span class="operator">-</span><span class="name">DDeadFilterInterval</span><span class="operator">=</span><span class="literal number integer">300</span> <span class="operator">&amp;</span>
<span class="ln">2 </span>  <span class="name">notifd2db</span> <span class="operator">-</span><span class="name">o</span> <span class="operator">/</span><span class="name">var</span><span class="operator">/</span><span class="name">myfile</span><span class="punctuation">.</span><span class="name">res</span>
</pre>
<p>The Notification Service daemon is started at line 1. Its -n option is
used to disable the use of the CORBA Naming Service for registering the
default event channel factory. The registration of the Notification
Service daemon in the file used as database is done at line 2 with its
<strong>-o</strong> command line option.</p>
<p>It differs on a Windows computer because the name of the file used by
the CORBA notification service to store its channel factory IOR must be
specified using its -D command line option. This file name has also to
be passed to the notifd2db command.</p>
<pre class="code cpp literal-block">
<span class="ln">1 </span>  <span class="name">notifd</span> <span class="operator">-</span><span class="name">n</span> <span class="operator">-</span><span class="name">DDeadFilterInterval</span><span class="operator">=</span><span class="literal number integer">300</span> <span class="operator">-</span><span class="name">DFactoryIORFileName</span><span class="operator">=</span><span class="name label">C</span><span class="punctuation">:</span><span class="error">\</span><span class="name">Temp</span><span class="error">\</span><span class="name">evfact</span><span class="punctuation">.</span><span class="name">ior</span> <span class="operator">&amp;</span>
<span class="ln">2 </span>  <span class="name">notifd2db</span> <span class="name label">C</span><span class="punctuation">:</span><span class="error">\</span><span class="name">Temp</span><span class="error">\</span><span class="name">evfact</span><span class="punctuation">.</span><span class="name">ior</span> <span class="operator">-</span><span class="name">o</span> <span class="name label">C</span><span class="punctuation">:</span><span class="error">\</span><span class="name">Temp</span><span class="error">\</span><span class="name">myfile</span><span class="punctuation">.</span><span class="name">res</span>
</pre>
</div>
<div class="section" id="id3">
<h3>For release 8 and above<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>A new event system has been implemented starting with Tango release 8.
With this new event system, the CORBA Notification service is not needed
any more. This means that <strong>as soon</strong> as all clients using events from
devices embedded in the device server use Tango 8, it is not required to
start any process other than the device server and its clients.</p>
</div>
</div>
<div class="section" id="with-the-controlled-access">
<h2>With the controlled access<a class="headerlink" href="#with-the-controlled-access" title="Permalink to this headline">¶</a></h2>
<p>Using the Tango controlled access means starting a specific device
server called TangoAccessControl. By default, this server has to be
started with the instance name set to 1 and its device name is
sys/access_control/1. The command line to start this device server is:</p>
<pre class="code cpp literal-block">
<span class="ln">1 </span>  <span class="name">TangoAccessControl</span> <span class="literal number integer">1</span>
</pre>
<p>This server connects to MySQL using a default logging name set to root.
You can change this behaviour with the MYSQL_USER and MYSQL_PASSWORD
environment variables. Define them before starting the controlled access
device server. This server also uses the MYSQL_HOST environment
variable if you need to connect it to some MySQL server running on
another host. The syntax of this environment varaible is host:port. Port
is optional and if it is not defined, the MySQL default port is used
(3306). If it is not defined at all, a connection to the localhost is
made. This controlled access system uses the Tango database to retrieve
user rights and it is not possible to run it in a Tango control system
running without database.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="without-sql-db.html" class="btn btn-neutral float-right" title="Running a device server without SQL database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Tango Community, Creative Commons Attribution 4.0 International (CC BY 4.0).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'9.2.5',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>